(window["webpackJsonp_N_E"] = window["webpackJsonp_N_E"] || []).push([[1],{

/***/ "../node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-confirm-sign-in_7.entry.js":
/*!**************************************************************************************************!*\
  !*** ../node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-confirm-sign-in_7.entry.js ***!
  \**************************************************************************************************/
/*! exports provided: amplify_confirm_sign_in, amplify_confirm_sign_up, amplify_forgot_password, amplify_require_new_password, amplify_sign_in, amplify_sign_up, amplify_verify_contact */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_confirm_sign_in\", function() { return AmplifyConfirmSignIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_confirm_sign_up\", function() { return AmplifyConfirmSignUp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_forgot_password\", function() { return AmplifyForgotPassword; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_require_new_password\", function() { return AmplifyRequireNewPassword; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_sign_in\", function() { return AmplifySignIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_sign_up\", function() { return AmplifySignUp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"amplify_verify_contact\", function() { return AmplifyVerifyContact; });\n/* harmony import */ var _index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-3fb5c139.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/index-3fb5c139.js\");\n/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ \"../node_modules/@aws-amplify/core/lib-esm/index.js\");\n/* harmony import */ var _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./auth-types-78df304e.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-types-78df304e.js\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/auth */ \"../node_modules/@aws-amplify/auth/lib-esm/index.js\");\n/* harmony import */ var _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Translations-c833f663.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/Translations-c833f663.js\");\n/* harmony import */ var _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants-d1abe7de.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/constants-d1abe7de.js\");\n/* harmony import */ var _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helpers-09e7c279.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/helpers-09e7c279.js\");\n/* harmony import */ var _auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./auth-helpers-63cc23c0.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-helpers-63cc23c0.js\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\n\n\n\n\n\n\n\n\nvar AmplifyConfirmSignIn = /** @class */ (function () {\n    function class_1(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** Fires when confirm sign in form is submitted */\n        this.handleSubmit = function (event) { return _this.confirm(event); };\n        /** Used for header text in confirm sign in component */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SMS_CODE;\n        /** Used for the submit button text in confirm sign in component */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM;\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /**\n         * Form fields allows you to utilize our pre-built components such as username field, code field, password field, email field, etc.\n         * by passing an array of strings that you would like the order of the form to be in. If you need more customization, such as changing\n         * text for a label or adjust a placeholder, you can follow the structure below in order to do just that.\n         * ```\n         * [\n         *  {\n         *    type: string,\n         *    label: string,\n         *    placeholder: string,\n         *    hint: string | Functional Component | null,\n         *    required: boolean\n         *  }\n         * ]\n         * ```\n         */\n        this.formFields = [\n            {\n                type: 'code',\n                required: true,\n                handleInputChange: function (event) { return _this.handleCodeChange(event); },\n            },\n        ];\n        /** The MFA option to confirm with */\n        this.mfaOption = _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"M\"].SMS;\n        /* Whether or not the confirm-sign-in component is loading */\n        this.loading = false;\n    }\n    class_1.prototype.componentWillLoad = function () {\n        this.setup();\n    };\n    class_1.prototype.userHandler = function () {\n        this.setup();\n    };\n    class_1.prototype.setup = function () {\n        if (this.user && this.user['challengeName'] === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"C\"].SoftwareTokenMFA) {\n            this.mfaOption = _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"M\"].TOTP;\n            // If header text is using default use TOTP string\n            if (this.headerText === _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SMS_CODE) {\n                this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_TOTP_CODE;\n            }\n        }\n    };\n    class_1.prototype.handleCodeChange = function (event) {\n        this.code = event.target.value;\n    };\n    class_1.prototype.confirm = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var mfaType, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        mfaType = this.user['challengeName'] === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"C\"].SoftwareTokenMFA ? _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"C\"].SoftwareTokenMFA : null;\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].confirmSignIn !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 4, 5, 6]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].confirmSignIn(this.user, this.code, mfaType)];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, Object(_auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__[\"c\"])(this.user, this.handleAuthStateChange)];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 4:\n                        error_1 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_1);\n                        return [3 /*break*/, 6];\n                    case 5:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), handleSubmit: this.handleSubmit, submitButtonText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.submitButtonText), loading: this.loading, secondaryFooterContent: Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn); } }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].BACK_TO_SIGN_IN))) }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.formFields }))));\n    };\n    Object.defineProperty(class_1, \"watchers\", {\n        get: function () {\n            return {\n                \"user\": [\"userHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_1;\n}());\nvar AmplifyConfirmSignUp = /** @class */ (function () {\n    function class_2(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** Fires when sign up form is submitted */\n        this.handleSubmit = function (event) { return _this.confirmSignUp(event); };\n        /** Used for header text in confirm sign up component */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_HEADER_TEXT;\n        /** Used for the submit button text in confirm sign up component */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT;\n        /**\n         * Form fields allows you to utilize our pre-built components such as username field, code field, password field, email field, etc.\n         * by passing an array of strings that you would like the order of the form to be in. If you need more customization, such as changing\n         * text for a label or adjust a placeholder, you can follow the structure below in order to do just that.\n         * ```\n         * [\n         *  {\n         *    type: string,\n         *    label: string,\n         *    placeholder: string,\n         *    hint: string | Functional Component | null,\n         *    required: boolean\n         *  }\n         * ]\n         * ```\n         */\n        this.formFields = [];\n        /** Auth state change handler for this components\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /** Username Alias is used to setup authentication with `username`, `email` or `phone_number`  */\n        this.usernameAlias = 'username';\n        this.loading = false;\n        this.newFormFields = [];\n        this.phoneNumber = {\n            countryDialCodeValue: _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"h\"],\n            phoneNumberValue: null,\n        };\n    }\n    class_2.prototype.componentWillLoad = function () {\n        this.setup();\n    };\n    class_2.prototype.formFieldsHandler = function () {\n        this.buildFormFields();\n    };\n    class_2.prototype.userHandler = function () {\n        this.setup();\n    };\n    class_2.prototype.setup = function () {\n        // TODO: Use optional chaining instead\n        this.userInput = this.user && this.user.username;\n        this._signUpAttrs = this.user && this.user.signUpAttrs;\n        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"c\"])(this.usernameAlias);\n        this.buildFormFields();\n    };\n    class_2.prototype.buildDefaultFormFields = function () {\n        var _this = this;\n        this.newFormFields = [\n            {\n                type: \"\" + this.usernameAlias,\n                required: true,\n                handleInputChange: this.handleFormFieldInputChange(\"\" + this.usernameAlias),\n                value: this.userInput,\n                disabled: this.userInput ? true : false,\n            },\n            {\n                type: 'code',\n                label: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_CODE_LABEL),\n                placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_CODE_PLACEHOLDER),\n                required: true,\n                hint: (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_LOST_CODE), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.resendConfirmCode(); } }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_RESEND_CODE)))),\n                handleInputChange: this.handleFormFieldInputChange('code'),\n            },\n        ];\n    };\n    class_2.prototype.buildFormFields = function () {\n        var _this = this;\n        if (this.formFields.length === 0) {\n            this.buildDefaultFormFields();\n        }\n        else {\n            var newFields_1 = [];\n            this.formFields.forEach(function (field) {\n                var newField = Object.assign({}, field);\n                if (newField.type === 'code') {\n                    newField['hint'] = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"i\"])(newField) ? (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_LOST_CODE), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.resendConfirmCode(); } }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_RESEND_CODE)))) : (newField['hint']);\n                }\n                newField['handleInputChange'] = function (event) { return _this.handleFormFieldInputWithCallback(event, field); };\n                newFields_1.push(newField);\n            });\n            this.newFormFields = newFields_1;\n        }\n    };\n    class_2.prototype.handleFormFieldInputChange = function (fieldType) {\n        var _this = this;\n        switch (fieldType) {\n            case 'username':\n            case 'email':\n                return function (event) { return (_this.userInput = event.target.value); };\n            case 'phone_number':\n                return function (event) { return Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"h\"])(event, _this.phoneNumber); };\n            case 'code':\n                return function (event) { return (_this.code = event.target.value); };\n            default:\n                return;\n        }\n    };\n    class_2.prototype.setFieldValue = function (field) {\n        switch (field.type) {\n            case 'username':\n            case 'email':\n                if (field.value === undefined) {\n                    this.userInput = '';\n                }\n                else {\n                    this.userInput = field.value;\n                }\n                break;\n            case 'phone_number':\n                if (field.dialCode) {\n                    this.phoneNumber.countryDialCodeValue = field.dialCode;\n                }\n                this.phoneNumber.phoneNumberValue = field.value;\n                break;\n        }\n    };\n    class_2.prototype.handleFormFieldInputWithCallback = function (event, field) {\n        var fnToCall = field['handleInputChange']\n            ? field['handleInputChange']\n            : function (event, cb) {\n                cb(event);\n            };\n        var callback = this.handleFormFieldInputChange(field.type);\n        fnToCall(event, callback.bind(this));\n    };\n    class_2.prototype.resendConfirmCode = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].resendSignUp !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        if (!this.userInput)\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].EMPTY_USERNAME);\n                        this.userInput = this.userInput.trim();\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].resendSignUp(this.userInput)];\n                    case 2:\n                        _a.sent();\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].ConfirmSignUp);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_2 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_2);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // TODO: Add validation\n    // TODO: Prefix\n    class_2.prototype.confirmSignUp = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var confirmSignUpResult, error_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].confirmSignUp !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        switch (this.usernameAlias) {\n                            case 'phone_number':\n                                try {\n                                    this.userInput = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"b\"])(this.phoneNumber);\n                                }\n                                catch (error) {\n                                    Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error);\n                                }\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, 7, 8]);\n                        if (!this.userInput)\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].EMPTY_USERNAME);\n                        this.userInput = this.userInput.trim();\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].confirmSignUp(this.userInput, this.code)];\n                    case 2:\n                        confirmSignUpResult = _a.sent();\n                        if (!confirmSignUpResult) {\n                            throw new Error(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CONFIRM_SIGN_UP_FAILED));\n                        }\n                        if (!(this._signUpAttrs && this._signUpAttrs.password && this._signUpAttrs.password !== '')) return [3 /*break*/, 4];\n                        // Auto sign in user if password is available from previous workflow\n                        return [4 /*yield*/, Object(_auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__[\"h\"])(this.userInput, this._signUpAttrs.password, this.handleAuthStateChange)];\n                    case 3:\n                        // Auto sign in user if password is available from previous workflow\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn);\n                        _a.label = 5;\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        error_3 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_3);\n                        return [3 /*break*/, 8];\n                    case 7:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_2.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), submitButtonText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.submitButtonText), handleSubmit: this.handleSubmit, loading: this.loading, secondaryFooterContent: Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn); } }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].BACK_TO_SIGN_IN)))) }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.newFormFields }))));\n    };\n    Object.defineProperty(class_2, \"watchers\", {\n        get: function () {\n            return {\n                \"formFields\": [\"formFieldsHandler\"],\n                \"user\": [\"userHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_2;\n}());\nvar logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"Logger\"]('ForgotPassword');\nvar AmplifyForgotPassword = /** @class */ (function () {\n    function class_3(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** The header text of the forgot password section */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].RESET_YOUR_PASSWORD;\n        /** The text displayed inside of the send code button for the form */\n        this.sendButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SEND_CODE;\n        /** The text displayed inside of the submit button for the form */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SUBMIT;\n        /** The form fields displayed inside of the forgot password form */\n        this.formFields = [];\n        /** The function called when making a request to reset password */\n        this.handleSend = function (event) { return _this.send(event); };\n        /** The function called when submitting a new password */\n        this.handleSubmit = function (event) { return _this.submit(event); };\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /** Username Alias is used to setup authentication with `username`, `email` or `phone_number`  */\n        this.usernameAlias = 'username';\n        this.delivery = null;\n        this.loading = false;\n        this.phoneNumber = {\n            countryDialCodeValue: _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"h\"],\n            phoneNumberValue: null,\n        };\n        this.newFormFields = [];\n        this.forgotPasswordAttrs = {\n            userInput: '',\n            password: '',\n            code: '',\n        };\n    }\n    class_3.prototype.componentWillLoad = function () {\n        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"c\"])(this.usernameAlias);\n        this.buildFormFields();\n    };\n    class_3.prototype.formFieldsHandler = function () {\n        this.buildFormFields();\n    };\n    class_3.prototype.buildFormFields = function () {\n        var _this = this;\n        if (this.formFields.length === 0) {\n            this.buildDefaultFormFields();\n        }\n        else {\n            this.formFields.forEach(function (field) {\n                var newField = Object.assign({}, field);\n                newField['handleInputChange'] = function (event) { return _this.handleFormFieldInputWithCallback(event, field); };\n                _this.newFormFields.push(newField);\n            });\n        }\n    };\n    class_3.prototype.buildDefaultFormFields = function () {\n        switch (this.usernameAlias) {\n            case 'email':\n                this.newFormFields = [\n                    {\n                        type: 'email',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('email'),\n                        inputProps: {\n                            'data-test': 'forgot-password-email-input',\n                        },\n                    },\n                ];\n                break;\n            case 'phone_number':\n                this.newFormFields = [\n                    {\n                        type: 'phone_number',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('phone_number'),\n                        inputProps: {\n                            'data-test': 'forgot-password-phone-number-input',\n                        },\n                    },\n                ];\n                break;\n            case 'username':\n            default:\n                this.newFormFields = [\n                    {\n                        type: 'username',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('username'),\n                        inputProps: {\n                            'data-test': 'forgot-password-username-input',\n                        },\n                    },\n                ];\n                break;\n        }\n    };\n    class_3.prototype.handleFormFieldInputChange = function (fieldType) {\n        var _this = this;\n        switch (fieldType) {\n            case 'username':\n            case 'email':\n                return function (event) { return (_this.forgotPasswordAttrs.userInput = event.target.value); };\n            case 'phone_number':\n                return function (event) { return Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"h\"])(event, _this.phoneNumber); };\n            case 'password':\n            case 'code':\n                return function (event) { return (_this.forgotPasswordAttrs[fieldType] = event.target.value); };\n            default:\n                return;\n        }\n    };\n    class_3.prototype.setFieldValue = function (field, formAttributes) {\n        switch (field.type) {\n            case 'username':\n            case 'email':\n                if (field.value === undefined) {\n                    formAttributes.userInput = '';\n                }\n                else {\n                    formAttributes.userInput = field.value;\n                }\n                break;\n            case 'phone_number':\n                if (field.dialCode) {\n                    this.phoneNumber.countryDialCodeValue = field.dialCode;\n                }\n                this.phoneNumber.phoneNumberValue = field.value;\n                break;\n            case 'password':\n            case 'code':\n                if (field.value === undefined) {\n                    formAttributes[field.type] = '';\n                }\n                else {\n                    formAttributes[field.type] = field.value;\n                }\n                break;\n        }\n    };\n    class_3.prototype.handleFormFieldInputWithCallback = function (event, field) {\n        var fnToCall = field['handleInputChange']\n            ? field['handleInputChange']\n            : function (event, cb) {\n                cb(event);\n            };\n        var callback = this.handleFormFieldInputChange(field.type);\n        fnToCall(event, callback.bind(this));\n    };\n    class_3.prototype.send = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, error_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].forgotPassword !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        switch (this.usernameAlias) {\n                            case 'phone_number':\n                                try {\n                                    this.forgotPasswordAttrs.userInput = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"b\"])(this.phoneNumber);\n                                }\n                                catch (error) {\n                                    Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error);\n                                }\n                                break;\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, 4, 5]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].forgotPassword(this.forgotPasswordAttrs.userInput.trim())];\n                    case 2:\n                        data = _a.sent();\n                        logger.debug(data);\n                        this.newFormFields = [\n                            {\n                                type: 'code',\n                                required: true,\n                                handleInputChange: this.handleFormFieldInputChange('code'),\n                                inputProps: {\n                                    'data-test': 'forgot-password-code-input',\n                                },\n                            },\n                            {\n                                type: 'password',\n                                required: true,\n                                handleInputChange: this.handleFormFieldInputChange('password'),\n                                label: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].NEW_PASSWORD_LABEL),\n                                placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].NEW_PASSWORD_PLACEHOLDER),\n                            },\n                        ];\n                        this.delivery = data.CodeDeliveryDetails;\n                        return [3 /*break*/, 5];\n                    case 3:\n                        error_4 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_4);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_3.prototype.submit = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, userInput, code, password, data, error_5;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].forgotPasswordSubmit !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, 4, 5]);\n                        _a = this.forgotPasswordAttrs, userInput = _a.userInput, code = _a.code, password = _a.password;\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].forgotPasswordSubmit(userInput, code, password)];\n                    case 2:\n                        data = _b.sent();\n                        logger.debug(data);\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn);\n                        this.delivery = null;\n                        return [3 /*break*/, 5];\n                    case 3:\n                        error_5 = _b.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_5);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_3.prototype.render = function () {\n        var _this = this;\n        var submitFn = this.delivery ? function (event) { return _this.handleSubmit(event); } : function (event) { return _this.handleSend(event); };\n        var submitButtonText = this.delivery ? this.submitButtonText : this.sendButtonText;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), handleSubmit: submitFn, loading: this.loading, secondaryFooterContent: Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn); }, \"data-test\": \"forgot-password-back-to-sign-in-link\" }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].BACK_TO_SIGN_IN)), testDataPrefix: 'forgot-password', submitButtonText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(submitButtonText) }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.newFormFields }))));\n    };\n    Object.defineProperty(class_3, \"watchers\", {\n        get: function () {\n            return {\n                \"formFields\": [\"formFieldsHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_3;\n}());\nvar logger$1 = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"ConsoleLogger\"]('amplify-require-new-password');\nvar AmplifyRequireNewPassword = /** @class */ (function () {\n    function class_4(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** The header text of the forgot password section */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CHANGE_PASSWORD;\n        /** The text displayed inside of the submit button for the form */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CHANGE_PASSWORD_ACTION;\n        /** The function called when submitting a new password */\n        this.handleSubmit = function (event) { return _this.completeNewPassword(event); };\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /** The form fields displayed inside of the forgot password form */\n        this.formFields = [\n            {\n                type: _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"a\"].Password,\n                required: true,\n                handleInputChange: function (event) { return _this.handlePasswordChange(event); },\n                label: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].NEW_PASSWORD_LABEL),\n                placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].NEW_PASSWORD_PLACEHOLDER),\n                inputProps: {\n                    'data-test': 'require-new-password-password-input',\n                },\n            },\n        ];\n        this.loading = false;\n        this.requiredAttributes = {};\n        this.newFormFields = this.formFields;\n    }\n    class_4.prototype.userHandler = function () {\n        this.setCurrentUser();\n    };\n    class_4.prototype.handleRequiredAttributeInputChange = function (attribute, event) {\n        this.requiredAttributes[attribute] = event.target.value;\n    };\n    class_4.prototype.setCurrentUser = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var user, error_6, userRequiredAttributes;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.user) return [3 /*break*/, 5];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].currentAuthenticatedUser()];\n                    case 2:\n                        user = _a.sent();\n                        if (user)\n                            this.currentUser = user;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_6 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_6);\n                        return [3 /*break*/, 4];\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        this.currentUser = this.user;\n                        _a.label = 6;\n                    case 6:\n                        if (this.currentUser && this.currentUser.challengeParam && this.currentUser.challengeParam.requiredAttributes) {\n                            userRequiredAttributes = this.currentUser.challengeParam.requiredAttributes;\n                            userRequiredAttributes.forEach(function (attribute) {\n                                var formField = {\n                                    type: attribute,\n                                    required: true,\n                                    label: _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"r\"][attribute].label,\n                                    placeholder: _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"r\"][attribute].placeholder,\n                                    handleInputChange: function (event) { return _this.handleRequiredAttributeInputChange(attribute, event); },\n                                    inputProps: {\n                                        'data-test': \"require-new-password-\" + attribute + \"-input\",\n                                    },\n                                };\n                                _this.newFormFields = __spreadArrays(_this.newFormFields, [formField]);\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_4.prototype.componentWillLoad = function () {\n        return this.setCurrentUser();\n    };\n    class_4.prototype.handlePasswordChange = function (event) {\n        this.password = event.target.value;\n    };\n    class_4.prototype.completeNewPassword = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var user, _a, error_7;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].completeNewPassword !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 8, 9, 10]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].completeNewPassword(this.currentUser, this.password, this.requiredAttributes)];\n                    case 2:\n                        user = _b.sent();\n                        logger$1.debug('complete new password', user);\n                        _a = user.challengeName;\n                        switch (_a) {\n                            case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"C\"].SMSMFA: return [3 /*break*/, 3];\n                            case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"C\"].MFASetup: return [3 /*break*/, 4];\n                        }\n                        return [3 /*break*/, 5];\n                    case 3:\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].ConfirmSignIn, user);\n                        return [3 /*break*/, 7];\n                    case 4:\n                        logger$1.debug('TOTP setup', user.challengeParam);\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].TOTPSetup, user);\n                        return [3 /*break*/, 7];\n                    case 5: return [4 /*yield*/, Object(_auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__[\"c\"])(user, this.handleAuthStateChange)];\n                    case 6:\n                        _b.sent();\n                        _b.label = 7;\n                    case 7: return [3 /*break*/, 10];\n                    case 8:\n                        error_7 = _b.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_7);\n                        return [3 /*break*/, 10];\n                    case 9:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_4.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), handleSubmit: this.handleSubmit, loading: this.loading, secondaryFooterContent: Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn); } }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].BACK_TO_SIGN_IN)), submitButtonText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.submitButtonText) }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.newFormFields }))));\n    };\n    Object.defineProperty(class_4, \"watchers\", {\n        get: function () {\n            return {\n                \"user\": [\"userHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_4;\n}());\nvar amplifySignInCss = \":host{--footer-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--footer-font-family:var(--amplify-font-family);--font-weight:var(--amplify-font-weight)}.sign-in-form-footer{font-family:var(--footer-font-family);font-size:var(--footer-size);color:var(--footer-color);font-weight:--font-weight;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.sign-in-form-footer amplify-button{margin-bottom:0.625rem}@media (min-width: 672px){.sign-in-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}.sign-in-form-footer amplify-button{margin-bottom:0}}.sign-in-form-footer *+*{margin-bottom:15px}\";\nvar AmplifySignIn = /** @class */ (function () {\n    function class_5(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** Fires when sign in form is submitted */\n        this.handleSubmit = function (event) { return _this.signIn(event); };\n        /** Used for header text in sign in component */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_IN_HEADER_TEXT;\n        /** Used for the submit button text in sign in component */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_IN_ACTION;\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /** Username Alias is used to setup authentication with `username`, `email` or `phone_number`  */\n        this.usernameAlias = 'username';\n        /**\n         * Form fields allows you to utilize our pre-built components such as username field, code field, password field, email field, etc.\n         * by passing an array of strings that you would like the order of the form to be in. If you need more customization, such as changing\n         * text for a label or adjust a placeholder, you can follow the structure below in order to do just that.\n         * ```\n         * [\n         *  {\n         *    type: string,\n         *    label: string,\n         *    placeholder: string,\n         *    hint: string | Functional Component | null,\n         *    required: boolean\n         *  }\n         * ]\n         * ```\n         */\n        this.formFields = [];\n        /** Hides the sign up link */\n        this.hideSignUp = false;\n        this.newFormFields = [];\n        /* Whether or not the sign-in component is loading */\n        this.loading = false;\n        this.phoneNumber = {\n            countryDialCodeValue: _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"h\"],\n            phoneNumberValue: null,\n        };\n        this.signInAttributes = {\n            userInput: '',\n            password: '',\n        };\n    }\n    class_5.prototype.componentWillLoad = function () {\n        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"c\"])(this.usernameAlias);\n        this.buildFormFields();\n    };\n    class_5.prototype.formFieldsHandler = function () {\n        this.buildFormFields();\n    };\n    class_5.prototype.handleFormFieldInputChange = function (fieldType) {\n        var _this = this;\n        switch (fieldType) {\n            case 'username':\n            case 'email':\n                return function (event) { return (_this.signInAttributes.userInput = event.target.value); };\n            case 'phone_number':\n                return function (event) { return Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"h\"])(event, _this.phoneNumber); };\n            case 'password':\n                return function (event) { return (_this.signInAttributes.password = event.target.value); };\n        }\n    };\n    class_5.prototype.handleFormFieldInputWithCallback = function (event, field) {\n        var fnToCall = field['handleInputChange']\n            ? field['handleInputChange']\n            : function (event, cb) {\n                cb(event);\n            };\n        var callback = this.handleFormFieldInputChange(field.type);\n        fnToCall(event, callback.bind(this));\n    };\n    class_5.prototype.signIn = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var username;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // avoid submitting the form\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        this.loading = true;\n                        switch (this.usernameAlias) {\n                            case 'phone_number':\n                                try {\n                                    this.signInAttributes.userInput = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"b\"])(this.phoneNumber);\n                                }\n                                catch (error) {\n                                    Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error);\n                                }\n                        }\n                        username = this.signInAttributes.userInput.trim();\n                        return [4 /*yield*/, Object(_auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__[\"h\"])(username, this.signInAttributes.password, this.handleAuthStateChange)];\n                    case 1:\n                        _a.sent();\n                        this.loading = false;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_5.prototype.buildDefaultFormFields = function () {\n        var _this = this;\n        var formFieldInputs = [];\n        switch (this.usernameAlias) {\n            case 'email':\n                formFieldInputs.push({\n                    type: 'email',\n                    required: true,\n                    handleInputChange: this.handleFormFieldInputChange('email'),\n                    inputProps: {\n                        'data-test': 'sign-in-email-input',\n                    },\n                });\n                break;\n            case 'phone_number':\n                formFieldInputs.push({\n                    type: 'phone_number',\n                    required: true,\n                    handleInputChange: this.handleFormFieldInputChange('phone_number'),\n                    inputProps: {\n                        'data-test': 'sign-in-phone-number-input',\n                    },\n                });\n                break;\n            case 'username':\n            default:\n                formFieldInputs.push({\n                    type: 'username',\n                    required: true,\n                    handleInputChange: this.handleFormFieldInputChange('username'),\n                    inputProps: {\n                        'data-test': 'sign-in-username-input',\n                    },\n                });\n                break;\n        }\n        formFieldInputs.push({\n            type: 'password',\n            hint: (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].FORGOT_PASSWORD_TEXT), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].ForgotPassword); }, \"data-test\": \"sign-in-forgot-password-link\" }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].RESET_PASSWORD_TEXT)))),\n            required: true,\n            handleInputChange: this.handleFormFieldInputChange('password'),\n            inputProps: {\n                'data-test': 'sign-in-password-input',\n            },\n        });\n        this.newFormFields = __spreadArrays(formFieldInputs);\n    };\n    class_5.prototype.buildFormFields = function () {\n        var _this = this;\n        if (this.formFields.length === 0) {\n            this.buildDefaultFormFields();\n        }\n        else {\n            var newFields_2 = [];\n            this.formFields.forEach(function (field) {\n                var newField = Object.assign({}, field);\n                // TODO: handle hint better\n                if (newField.type === 'password') {\n                    newField['hint'] = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"i\"])(newField) ? (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].FORGOT_PASSWORD_TEXT), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].ForgotPassword); }, \"data-test\": \"sign-in-forgot-password-link\" }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].RESET_PASSWORD_TEXT)))) : (newField['hint']);\n                }\n                newField['handleInputChange'] = function (event) { return _this.handleFormFieldInputWithCallback(event, field); };\n                _this.setFieldValue(newField, _this.signInAttributes);\n                newFields_2.push(newField);\n            });\n            this.newFormFields = newFields_2;\n        }\n    };\n    class_5.prototype.setFieldValue = function (field, formAttributes) {\n        switch (field.type) {\n            case 'username':\n            case 'email':\n                if (field.value === undefined) {\n                    formAttributes.userInput = '';\n                }\n                else {\n                    formAttributes.userInput = field.value;\n                }\n                break;\n            case 'phone_number':\n                if (field.dialCode) {\n                    this.phoneNumber.countryDialCodeValue = field.dialCode;\n                }\n                this.phoneNumber.phoneNumberValue = field.value;\n                break;\n            case 'password':\n                if (field.value === undefined) {\n                    formAttributes.password = '';\n                }\n                else {\n                    formAttributes.password = field.value;\n                }\n                break;\n        }\n    };\n    class_5.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), handleSubmit: this.handleSubmit, testDataPrefix: 'sign-in' }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", { slot: \"subtitle\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"header-subtitle\" })), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"federated-buttons\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-federated-buttons\", { handleAuthStateChange: this.handleAuthStateChange, federated: this.federated })), !Object(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"isEmpty\"])(this.federated) && Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-strike\", null, \"or\"), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.newFormFields }), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", { slot: \"amplify-form-section-footer\", class: \"sign-in-form-footer\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"footer\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"secondary-footer-content\" }, !this.hideSignUp ? (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].NO_ACCOUNT_TEXT), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignUp); }, \"data-test\": \"sign-in-create-account-link\" }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CREATE_ACCOUNT_TEXT)))) : (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null))), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"primary-footer-content\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { type: \"submit\", disabled: this.loading, \"data-test\": \"sign-in-sign-in-button\" }, this.loading ? Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-loading-spinner\", null) : Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.submitButtonText)))))))));\n    };\n    Object.defineProperty(class_5, \"watchers\", {\n        get: function () {\n            return {\n                \"formFields\": [\"formFieldsHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_5;\n}());\nAmplifySignIn.style = amplifySignInCss;\nvar amplifySignUpCss = \":host{--footer-font-family:var(--amplify-font-family);--footer-font-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--font-weight:var(--amplify-font-weight)}.sign-up-form-footer{font-family:var(--footer-font-family);font-size:var(--footer-font-size);color:var(--footer-color);font-weight:--font-weight;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.sign-up-form-footer amplify-button{margin-bottom:0.625rem}@media (min-width: 672px){.sign-up-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}.sign-up-form-footer amplify-button{margin-bottom:0}}.sign-up-form-footer *+*{margin-bottom:15px}\";\nvar AmplifySignUp = /** @class */ (function () {\n    function class_6(hostRef) {\n        var _this = this;\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** Fires when sign up form is submitted */\n        this.handleSubmit = function (event) { return _this.signUp(event); };\n        /** Used for header text in sign up component */\n        this.headerText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_HEADER_TEXT;\n        /** Used for the submit button text in sign up component */\n        this.submitButtonText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_SUBMIT_BUTTON_TEXT;\n        /** Used for the submit button text in sign up component */\n        this.haveAccountText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_HAVE_ACCOUNT_TEXT;\n        /** Text used for the sign in hyperlink */\n        this.signInText = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_IN_TEXT;\n        /**\n         * Form fields allows you to utilize our pre-built components such as username field, code field, password field, email field, etc.\n         * by passing an array of strings that you would like the order of the form to be in. If you need more customization, such as changing\n         * text for a label or adjust a placeholder, you can follow the structure below in order to do just that.\n         * ```\n         * [\n         *  {\n         *    type: string,\n         *    label: string,\n         *    placeholder: string,\n         *    hint: string | Functional Component | null,\n         *    required: boolean\n         *  }\n         * ]\n         * ```\n         */\n        this.formFields = [];\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        /** Username Alias is used to setup authentication with `username`, `email` or `phone_number`  */\n        this.usernameAlias = 'username';\n        // private userInput: string | PhoneNumberInterface;\n        this.newFormFields = [];\n        this.phoneNumber = {\n            countryDialCodeValue: _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"h\"],\n            phoneNumberValue: null,\n        };\n        this.loading = false;\n        this.signUpAttributes = {\n            username: '',\n            password: '',\n            attributes: {},\n        };\n    }\n    class_6.prototype.handleFormFieldInputChange = function (fieldType) {\n        var _this = this;\n        switch (fieldType) {\n            case 'username':\n                return function (event) { return (_this.signUpAttributes.username = event.target.value); };\n            case 'password':\n                return function (event) { return (_this.signUpAttributes.password = event.target.value); };\n            case 'email':\n                return function (event) { return (_this.signUpAttributes.attributes.email = event.target.value); };\n            case 'phone_number':\n                return function (event) { return Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"h\"])(event, _this.phoneNumber); };\n            default:\n                return function (event) { return (_this.signUpAttributes.attributes[fieldType] = event.target.value); };\n        }\n    };\n    class_6.prototype.handleFormFieldInputWithCallback = function (event, field) {\n        var fnToCall = field['handleInputChange']\n            ? field['handleInputChange']\n            : function (event, cb) {\n                cb(event);\n            };\n        var callback = this.handleFormFieldInputChange(field.type);\n        fnToCall(event, callback.bind(this));\n    };\n    // TODO: Add validation\n    // TODO: Prefix\n    class_6.prototype.signUp = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, signUpAttrs, error_8;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (event) {\n                            event.preventDefault();\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].signUp !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        if (this.phoneNumber.phoneNumberValue) {\n                            try {\n                                this.signUpAttributes.attributes.phone_number = Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"b\"])(this.phoneNumber);\n                            }\n                            catch (error) {\n                                Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error);\n                            }\n                        }\n                        switch (this.usernameAlias) {\n                            case 'email':\n                            case 'phone_number':\n                                this.signUpAttributes.username = this.signUpAttributes.attributes[this.usernameAlias];\n                                break;\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, 7, 8]);\n                        if (!this.signUpAttributes.username) {\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].EMPTY_USERNAME);\n                        }\n                        if (this.signUpAttributes.username.indexOf(' ') >= 0) {\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].USERNAME_REMOVE_WHITESPACE);\n                        }\n                        if (this.signUpAttributes.password !== this.signUpAttributes.password.trim()) {\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].PASSWORD_REMOVE_WHITESPACE);\n                        }\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].signUp(this.signUpAttributes)];\n                    case 2:\n                        data = _a.sent();\n                        if (!data) {\n                            throw new Error(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_FAILED);\n                        }\n                        if (!data.userConfirmed) return [3 /*break*/, 4];\n                        return [4 /*yield*/, Object(_auth_helpers_63cc23c0_js__WEBPACK_IMPORTED_MODULE_7__[\"h\"])(this.signUpAttributes.username, this.signUpAttributes.password, this.handleAuthStateChange)];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        signUpAttrs = Object.assign({}, this.signUpAttributes);\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].ConfirmSignUp, Object.assign(Object.assign({}, data.user), { signUpAttrs: signUpAttrs }));\n                        _a.label = 5;\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        error_8 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_8);\n                        return [3 /*break*/, 8];\n                    case 7:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_6.prototype.buildDefaultFormFields = function () {\n        switch (this.usernameAlias) {\n            case 'email':\n                this.newFormFields = [\n                    {\n                        type: 'email',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_EMAIL_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('email'),\n                        inputProps: {\n                            'data-test': 'sign-up-email-input',\n                        },\n                    },\n                    {\n                        type: 'password',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_PASSWORD_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('password'),\n                        inputProps: {\n                            'data-test': 'sign-up-password-input',\n                        },\n                    },\n                    {\n                        type: 'phone_number',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('phone_number'),\n                        inputProps: {\n                            'data-test': 'sign-up-phone-number-input',\n                        },\n                    },\n                ];\n                break;\n            case 'phone_number':\n                this.newFormFields = [\n                    {\n                        type: 'phone_number',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('phone_number'),\n                        inputProps: {\n                            'data-test': 'sign-up-phone-number-input',\n                        },\n                    },\n                    {\n                        type: 'password',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_PASSWORD_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('password'),\n                        inputProps: {\n                            'data-test': 'sign-up-password-input',\n                        },\n                    },\n                    {\n                        type: 'email',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_EMAIL_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('email'),\n                        inputProps: {\n                            'data-test': 'sign-up-email-input',\n                        },\n                    },\n                ];\n                break;\n            case 'username':\n            default:\n                this.newFormFields = [\n                    {\n                        type: 'username',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_USERNAME_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('username'),\n                        inputProps: {\n                            'data-test': 'sign-up-username-input',\n                        },\n                    },\n                    {\n                        type: 'password',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_PASSWORD_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('password'),\n                        inputProps: {\n                            'data-test': 'sign-up-password-input',\n                        },\n                    },\n                    {\n                        type: 'email',\n                        placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].SIGN_UP_EMAIL_PLACEHOLDER),\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('email'),\n                        inputProps: {\n                            'data-test': 'sign-up-email-input',\n                        },\n                    },\n                    {\n                        type: 'phone_number',\n                        required: true,\n                        handleInputChange: this.handleFormFieldInputChange('phone_number'),\n                        inputProps: {\n                            'data-test': 'sign-up-phone-number-input',\n                        },\n                    },\n                ];\n                break;\n        }\n    };\n    class_6.prototype.buildFormFields = function () {\n        var _this = this;\n        if (this.formFields.length === 0) {\n            this.buildDefaultFormFields();\n        }\n        else {\n            var newFields_3 = [];\n            this.formFields.forEach(function (field) {\n                var newField = Object.assign({}, field);\n                newField['handleInputChange'] = function (event) { return _this.handleFormFieldInputWithCallback(event, field); };\n                _this.setFieldValue(field, _this.signUpAttributes);\n                newFields_3.push(newField);\n            });\n            this.newFormFields = newFields_3;\n        }\n    };\n    class_6.prototype.setFieldValue = function (field, formAttributes) {\n        switch (field.type) {\n            case 'username':\n                if (field.value === undefined) {\n                    formAttributes.username = '';\n                }\n                else {\n                    formAttributes.username = field.value;\n                }\n                break;\n            case 'password':\n                if (field.value === undefined) {\n                    formAttributes.password = '';\n                }\n                else {\n                    formAttributes.password = field.value;\n                }\n                break;\n            case 'email':\n                formAttributes.attributes.email = field.value;\n                break;\n            case 'phone_number':\n                if (field.dialCode) {\n                    this.phoneNumber.countryDialCodeValue = field.dialCode;\n                }\n                this.phoneNumber.phoneNumberValue = field.value;\n                break;\n            default:\n                formAttributes.attributes[field.type] = field.value;\n                break;\n        }\n    };\n    class_6.prototype.componentWillLoad = function () {\n        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"c\"])(this.usernameAlias);\n        this.buildFormFields();\n    };\n    class_6.prototype.formFieldsHandler = function () {\n        this.buildFormFields();\n    };\n    class_6.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.headerText), handleSubmit: this.handleSubmit, testDataPrefix: 'sign-up' }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", { slot: \"subtitle\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"header-subtitle\" })), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-auth-fields\", { formFields: this.newFormFields }), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", { class: \"sign-up-form-footer\", slot: \"amplify-form-section-footer\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"footer\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"secondary-footer-content\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.haveAccountText), ' ', Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignIn); }, \"data-test\": \"sign-up-sign-in-link\" }, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.signInText)))), Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"slot\", { name: \"primary-footer-content\" }, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { type: \"submit\", \"data-test\": \"sign-up-create-account-button\" }, this.loading ? Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-loading-spinner\", null) : Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(this.submitButtonText)))))))));\n    };\n    Object.defineProperty(class_6, \"watchers\", {\n        get: function () {\n            return {\n                \"formFields\": [\"formFieldsHandler\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return class_6;\n}());\nAmplifySignUp.style = amplifySignUpCss;\nvar logger$2 = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"Logger\"]('AmplifyVerifyContact');\nvar AmplifyVerifyContact = /** @class */ (function () {\n    function class_7(hostRef) {\n        Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"r\"])(this, hostRef);\n        /** Authentication state handler */\n        this.handleAuthStateChange = _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"d\"];\n        this.loading = false;\n    }\n    class_7.prototype.handleSubmit = function (event) {\n        event.preventDefault();\n        this.verifyAttr ? this.submit(this.code) : this.verify(this.contact);\n    };\n    class_7.prototype.submit = function (code) {\n        return __awaiter(this, void 0, void 0, function () {\n            var attr, data, error_9;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        attr = this.verifyAttr;\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].verifyCurrentUserAttributeSubmit !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, 4, 5]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].verifyCurrentUserAttributeSubmit(attr, code)];\n                    case 2:\n                        data = _a.sent();\n                        logger$2.debug(data);\n                        this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignedIn, this.user);\n                        this.verifyAttr = null;\n                        return [3 /*break*/, 5];\n                    case 3:\n                        error_9 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_9);\n                        logger$2.error(error_9);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_7.prototype.verify = function (contact) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, error_10;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!contact) {\n                            logger$2.error('Neither Email nor Phone Number selected');\n                            return [2 /*return*/];\n                        }\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].verifyCurrentUserAttribute !== 'function') {\n                            throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_5__[\"N\"]);\n                        }\n                        this.loading = true;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, 4, 5]);\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__[\"Auth\"].verifyCurrentUserAttribute(contact)];\n                    case 2:\n                        data = _a.sent();\n                        logger$2.debug(data);\n                        this.verifyAttr = contact;\n                        return [3 /*break*/, 5];\n                    case 3:\n                        error_10 = _a.sent();\n                        Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_6__[\"a\"])(error_10);\n                        logger$2.error(error_10);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        this.loading = false;\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_7.prototype.handleInputChange = function (event) {\n        var inputName = event.target.name;\n        if (inputName === 'code') {\n            this.code = event.target.value;\n        }\n        else if (inputName === 'contact') {\n            this.contact = event.target.value;\n        }\n    };\n    class_7.prototype.renderSubmit = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-input\", { inputProps: {\n                autocomplete: 'off',\n                'data-test': 'verify-contact-code-input',\n            }, name: \"code\", placeholder: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].CODE_PLACEHOLDER), handleInputChange: function (event) { return _this.handleInputChange(event); } })));\n    };\n    class_7.prototype.renderVerify = function () {\n        var _this = this;\n        var user = this.user;\n        if (!user) {\n            logger$2.debug('No user to verify');\n            return null;\n        }\n        var unverified = user.unverified;\n        if (!unverified) {\n            logger$2.debug('Unverified variable does not exist on user');\n            return null;\n        }\n        var email = unverified.email, phone_number = unverified.phone_number;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"div\", null, email && (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-radio-button\", { label: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].VERIFY_CONTACT_EMAIL_LABEL), key: \"email\", name: \"contact\", value: \"email\", handleInputChange: function (event) { return _this.handleInputChange(event); }, inputProps: {\n                'data-test': 'verify-contact-email-radio',\n            } })), phone_number && (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-radio-button\", { label: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].VERIFY_CONTACT_PHONE_LABEL), key: \"phone_number\", name: \"contact\", value: \"phone_number\", handleInputChange: function (event) { return _this.handleInputChange(event); }, inputProps: {\n                'data-test': 'verify-contact-email-radio',\n            } }))));\n    };\n    class_7.prototype.render = function () {\n        var _this = this;\n        return (Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"H\"], null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-form-section\", { handleSubmit: function (event) { return _this.handleSubmit(event); }, headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].VERIFY_CONTACT_HEADER_TEXT), loading: this.loading, secondaryFooterContent: Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"span\", null, Object(_index_3fb5c139_js__WEBPACK_IMPORTED_MODULE_0__[\"h\"])(\"amplify-button\", { variant: \"anchor\", onClick: function () { return _this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__[\"A\"].SignedIn, _this.user); } }, \"Skip\")), submitButtonText: this.verifyAttr\n                ? _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].VERIFY_CONTACT_SUBMIT_LABEL)\n                : _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__[\"I18n\"].get(_Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_4__[\"T\"].VERIFY_CONTACT_VERIFY_LABEL) }, this.verifyAttr ? this.renderSubmit() : this.renderVerify())));\n    };\n    return class_7;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9AYXdzLWFtcGxpZnkvdWktY29tcG9uZW50cy9kaXN0L2VzbS1lczUvYW1wbGlmeS1jb25maXJtLXNpZ24taW5fNy5lbnRyeS5qcz9kNGUzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCLDJCQUEyQiwrREFBK0QsZ0JBQWdCLEVBQUUsRUFBRTtBQUM5RztBQUNBLG1DQUFtQyxNQUFNLDZCQUE2QixFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ2pHLGtDQUFrQyxNQUFNLGlDQUFpQyxFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ3BHLCtCQUErQixxRkFBcUY7QUFDcEg7QUFDQSxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsU0FBSSxJQUFJLFNBQUk7QUFDL0IsYUFBYSw2QkFBNkIsMEJBQTBCLGFBQWEsRUFBRSxxQkFBcUI7QUFDeEcsZ0JBQWdCLHFEQUFxRCxvRUFBb0UsYUFBYSxFQUFFO0FBQ3hKLHNCQUFzQixzQkFBc0IscUJBQXFCLEdBQUc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLGtDQUFrQyxTQUFTO0FBQzNDLGtDQUFrQyxXQUFXLFVBQVU7QUFDdkQseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQSw2R0FBNkcsT0FBTyxVQUFVO0FBQzlILGdGQUFnRixpQkFBaUIsT0FBTztBQUN4Ryx3REFBd0QsZ0JBQWdCLFFBQVEsT0FBTztBQUN2Riw4Q0FBOEMsZ0JBQWdCLGdCQUFnQixPQUFPO0FBQ3JGO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTLFlBQVksYUFBYSxPQUFPLEVBQUUsVUFBVSxXQUFXO0FBQ2hFLG1DQUFtQyxTQUFTO0FBQzVDO0FBQ0E7QUFDQSxz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O0FBQzRVIiwiZmlsZSI6Ii4uL25vZGVfbW9kdWxlcy9AYXdzLWFtcGxpZnkvdWktY29tcG9uZW50cy9kaXN0L2VzbS1lczUvYW1wbGlmeS1jb25maXJtLXNpZ24taW5fNy5lbnRyeS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xuICAgIHJldHVybiByO1xufTtcbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC0zZmI1YzEzOS5qcyc7XG5pbXBvcnQgeyBJMThuLCBMb2dnZXIsIENvbnNvbGVMb2dnZXIsIGlzRW1wdHkgfSBmcm9tICdAYXdzLWFtcGxpZnkvY29yZSc7XG5pbXBvcnQgeyBNIGFzIE1mYU9wdGlvbiwgQyBhcyBDaGFsbGVuZ2VOYW1lLCBBIGFzIEF1dGhTdGF0ZSwgYSBhcyBBdXRoRm9ybUZpZWxkIH0gZnJvbSAnLi9hdXRoLXR5cGVzLTc4ZGYzMDRlLmpzJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICdAYXdzLWFtcGxpZnkvYXV0aCc7XG5pbXBvcnQgeyBUIGFzIFRyYW5zbGF0aW9ucyB9IGZyb20gJy4vVHJhbnNsYXRpb25zLWM4MzNmNjYzLmpzJztcbmltcG9ydCB7IE4gYXMgTk9fQVVUSF9NT0RVTEVfRk9VTkQsIGggYXMgQ09VTlRSWV9ESUFMX0NPREVfREVGQVVMVCB9IGZyb20gJy4vY29uc3RhbnRzLWQxYWJlN2RlLmpzJztcbmltcG9ydCB7IGQgYXMgZGlzcGF0Y2hBdXRoU3RhdGVDaGFuZ2VFdmVudCwgYSBhcyBkaXNwYXRjaFRvYXN0SHViRXZlbnQsIGMgYXMgY2hlY2tVc2VybmFtZUFsaWFzLCBpIGFzIGlzSGludFZhbGlkLCBoIGFzIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlLCBiIGFzIGNvbXBvc2VQaG9uZU51bWJlcklucHV0LCByIGFzIHJlcXVpcmVkQXR0cmlidXRlc01hcCB9IGZyb20gJy4vaGVscGVycy0wOWU3YzI3OS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNoZWNrQ29udGFjdCwgaCBhcyBoYW5kbGVTaWduSW4gfSBmcm9tICcuL2F1dGgtaGVscGVycy02M2NjMjNjMC5qcyc7XG52YXIgQW1wbGlmeUNvbmZpcm1TaWduSW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY2xhc3NfMShob3N0UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIC8qKiBGaXJlcyB3aGVuIGNvbmZpcm0gc2lnbiBpbiBmb3JtIGlzIHN1Ym1pdHRlZCAqL1xuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuY29uZmlybShldmVudCk7IH07XG4gICAgICAgIC8qKiBVc2VkIGZvciBoZWFkZXIgdGV4dCBpbiBjb25maXJtIHNpZ24gaW4gY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuaGVhZGVyVGV4dCA9IFRyYW5zbGF0aW9ucy5DT05GSVJNX1NNU19DT0RFO1xuICAgICAgICAvKiogVXNlZCBmb3IgdGhlIHN1Ym1pdCBidXR0b24gdGV4dCBpbiBjb25maXJtIHNpZ24gaW4gY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uVGV4dCA9IFRyYW5zbGF0aW9ucy5DT05GSVJNO1xuICAgICAgICAvKiogQXV0aCBzdGF0ZSBjaGFuZ2UgaGFuZGxlciBmb3IgdGhpcyBjb21wb25lbnQgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UgPSBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBmaWVsZHMgYWxsb3dzIHlvdSB0byB1dGlsaXplIG91ciBwcmUtYnVpbHQgY29tcG9uZW50cyBzdWNoIGFzIHVzZXJuYW1lIGZpZWxkLCBjb2RlIGZpZWxkLCBwYXNzd29yZCBmaWVsZCwgZW1haWwgZmllbGQsIGV0Yy5cbiAgICAgICAgICogYnkgcGFzc2luZyBhbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIG9yZGVyIG9mIHRoZSBmb3JtIHRvIGJlIGluLiBJZiB5b3UgbmVlZCBtb3JlIGN1c3RvbWl6YXRpb24sIHN1Y2ggYXMgY2hhbmdpbmdcbiAgICAgICAgICogdGV4dCBmb3IgYSBsYWJlbCBvciBhZGp1c3QgYSBwbGFjZWhvbGRlciwgeW91IGNhbiBmb2xsb3cgdGhlIHN0cnVjdHVyZSBiZWxvdyBpbiBvcmRlciB0byBkbyBqdXN0IHRoYXQuXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKiBbXG4gICAgICAgICAqICB7XG4gICAgICAgICAqICAgIHR5cGU6IHN0cmluZyxcbiAgICAgICAgICogICAgbGFiZWw6IHN0cmluZyxcbiAgICAgICAgICogICAgcGxhY2Vob2xkZXI6IHN0cmluZyxcbiAgICAgICAgICogICAgaGludDogc3RyaW5nIHwgRnVuY3Rpb25hbCBDb21wb25lbnQgfCBudWxsLFxuICAgICAgICAgKiAgICByZXF1aXJlZDogYm9vbGVhblxuICAgICAgICAgKiAgfVxuICAgICAgICAgKiBdXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb3JtRmllbGRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVDb2RlQ2hhbmdlKGV2ZW50KTsgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICAgIC8qKiBUaGUgTUZBIG9wdGlvbiB0byBjb25maXJtIHdpdGggKi9cbiAgICAgICAgdGhpcy5tZmFPcHRpb24gPSBNZmFPcHRpb24uU01TO1xuICAgICAgICAvKiBXaGV0aGVyIG9yIG5vdCB0aGUgY29uZmlybS1zaWduLWluIGNvbXBvbmVudCBpcyBsb2FkaW5nICovXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBjbGFzc18xLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUudXNlckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51c2VyICYmIHRoaXMudXNlclsnY2hhbGxlbmdlTmFtZSddID09PSBDaGFsbGVuZ2VOYW1lLlNvZnR3YXJlVG9rZW5NRkEpIHtcbiAgICAgICAgICAgIHRoaXMubWZhT3B0aW9uID0gTWZhT3B0aW9uLlRPVFA7XG4gICAgICAgICAgICAvLyBJZiBoZWFkZXIgdGV4dCBpcyB1c2luZyBkZWZhdWx0IHVzZSBUT1RQIHN0cmluZ1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyVGV4dCA9PT0gVHJhbnNsYXRpb25zLkNPTkZJUk1fU01TX0NPREUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRleHQgPSBUcmFuc2xhdGlvbnMuQ09ORklSTV9UT1RQX0NPREU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmhhbmRsZUNvZGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jb2RlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWZhVHlwZSwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtZmFUeXBlID0gdGhpcy51c2VyWydjaGFsbGVuZ2VOYW1lJ10gPT09IENoYWxsZW5nZU5hbWUuU29mdHdhcmVUb2tlbk1GQSA/IENoYWxsZW5nZU5hbWUuU29mdHdhcmVUb2tlbk1GQSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUF1dGggfHwgdHlwZW9mIEF1dGguY29uZmlybVNpZ25JbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsIDUsIDZdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEF1dGguY29uZmlybVNpZ25Jbih0aGlzLnVzZXIsIHRoaXMuY29kZSwgbWZhVHlwZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjaGVja0NvbnRhY3QodGhpcy51c2VyLCB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhbXBsaWZ5LWZvcm0tc2VjdGlvblwiLCB7IGhlYWRlclRleHQ6IEkxOG4uZ2V0KHRoaXMuaGVhZGVyVGV4dCksIGhhbmRsZVN1Ym1pdDogdGhpcy5oYW5kbGVTdWJtaXQsIHN1Ym1pdEJ1dHRvblRleHQ6IEkxOG4uZ2V0KHRoaXMuc3VibWl0QnV0dG9uVGV4dCksIGxvYWRpbmc6IHRoaXMubG9hZGluZywgc2Vjb25kYXJ5Rm9vdGVyQ29udGVudDogaChcInNwYW5cIiwgbnVsbCwgaChcImFtcGxpZnktYnV0dG9uXCIsIHsgdmFyaWFudDogXCJhbmNob3JcIiwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5TaWduSW4pOyB9IH0sIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5CQUNLX1RPX1NJR05fSU4pKSkgfSwgaChcImFtcGxpZnktYXV0aC1maWVsZHNcIiwgeyBmb3JtRmllbGRzOiB0aGlzLmZvcm1GaWVsZHMgfSkpKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfMSwgXCJ3YXRjaGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBcInVzZXJcIjogW1widXNlckhhbmRsZXJcIl1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gY2xhc3NfMTtcbn0oKSk7XG52YXIgQW1wbGlmeUNvbmZpcm1TaWduVXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY2xhc3NfMihob3N0UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIC8qKiBGaXJlcyB3aGVuIHNpZ24gdXAgZm9ybSBpcyBzdWJtaXR0ZWQgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmNvbmZpcm1TaWduVXAoZXZlbnQpOyB9O1xuICAgICAgICAvKiogVXNlZCBmb3IgaGVhZGVyIHRleHQgaW4gY29uZmlybSBzaWduIHVwIGNvbXBvbmVudCAqL1xuICAgICAgICB0aGlzLmhlYWRlclRleHQgPSBUcmFuc2xhdGlvbnMuQ09ORklSTV9TSUdOX1VQX0hFQURFUl9URVhUO1xuICAgICAgICAvKiogVXNlZCBmb3IgdGhlIHN1Ym1pdCBidXR0b24gdGV4dCBpbiBjb25maXJtIHNpZ24gdXAgY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uVGV4dCA9IFRyYW5zbGF0aW9ucy5DT05GSVJNX1NJR05fVVBfU1VCTUlUX0JVVFRPTl9URVhUO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBmaWVsZHMgYWxsb3dzIHlvdSB0byB1dGlsaXplIG91ciBwcmUtYnVpbHQgY29tcG9uZW50cyBzdWNoIGFzIHVzZXJuYW1lIGZpZWxkLCBjb2RlIGZpZWxkLCBwYXNzd29yZCBmaWVsZCwgZW1haWwgZmllbGQsIGV0Yy5cbiAgICAgICAgICogYnkgcGFzc2luZyBhbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIG9yZGVyIG9mIHRoZSBmb3JtIHRvIGJlIGluLiBJZiB5b3UgbmVlZCBtb3JlIGN1c3RvbWl6YXRpb24sIHN1Y2ggYXMgY2hhbmdpbmdcbiAgICAgICAgICogdGV4dCBmb3IgYSBsYWJlbCBvciBhZGp1c3QgYSBwbGFjZWhvbGRlciwgeW91IGNhbiBmb2xsb3cgdGhlIHN0cnVjdHVyZSBiZWxvdyBpbiBvcmRlciB0byBkbyBqdXN0IHRoYXQuXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKiBbXG4gICAgICAgICAqICB7XG4gICAgICAgICAqICAgIHR5cGU6IHN0cmluZyxcbiAgICAgICAgICogICAgbGFiZWw6IHN0cmluZyxcbiAgICAgICAgICogICAgcGxhY2Vob2xkZXI6IHN0cmluZyxcbiAgICAgICAgICogICAgaGludDogc3RyaW5nIHwgRnVuY3Rpb25hbCBDb21wb25lbnQgfCBudWxsLFxuICAgICAgICAgKiAgICByZXF1aXJlZDogYm9vbGVhblxuICAgICAgICAgKiAgfVxuICAgICAgICAgKiBdXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb3JtRmllbGRzID0gW107XG4gICAgICAgIC8qKiBBdXRoIHN0YXRlIGNoYW5nZSBoYW5kbGVyIGZvciB0aGlzIGNvbXBvbmVudHNcbiAgICAgICAgICogZS5nLiBTaWduSW4gLT4gJ0NyZWF0ZSBBY2NvdW50JyBsaW5rIC0+IFNpZ25VcFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UgPSBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50O1xuICAgICAgICAvKiogVXNlcm5hbWUgQWxpYXMgaXMgdXNlZCB0byBzZXR1cCBhdXRoZW50aWNhdGlvbiB3aXRoIGB1c2VybmFtZWAsIGBlbWFpbGAgb3IgYHBob25lX251bWJlcmAgICovXG4gICAgICAgIHRoaXMudXNlcm5hbWVBbGlhcyA9ICd1c2VybmFtZSc7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBbXTtcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHtcbiAgICAgICAgICAgIGNvdW50cnlEaWFsQ29kZVZhbHVlOiBDT1VOVFJZX0RJQUxfQ09ERV9ERUZBVUxULFxuICAgICAgICAgICAgcGhvbmVOdW1iZXJWYWx1ZTogbnVsbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2xhc3NfMi5wcm90b3R5cGUuY29tcG9uZW50V2lsbExvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICB9O1xuICAgIGNsYXNzXzIucHJvdG90eXBlLmZvcm1GaWVsZHNIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1aWxkRm9ybUZpZWxkcygpO1xuICAgIH07XG4gICAgY2xhc3NfMi5wcm90b3R5cGUudXNlckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICB9O1xuICAgIGNsYXNzXzIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUT0RPOiBVc2Ugb3B0aW9uYWwgY2hhaW5pbmcgaW5zdGVhZFxuICAgICAgICB0aGlzLnVzZXJJbnB1dCA9IHRoaXMudXNlciAmJiB0aGlzLnVzZXIudXNlcm5hbWU7XG4gICAgICAgIHRoaXMuX3NpZ25VcEF0dHJzID0gdGhpcy51c2VyICYmIHRoaXMudXNlci5zaWduVXBBdHRycztcbiAgICAgICAgY2hlY2tVc2VybmFtZUFsaWFzKHRoaXMudXNlcm5hbWVBbGlhcyk7XG4gICAgICAgIHRoaXMuYnVpbGRGb3JtRmllbGRzKCk7XG4gICAgfTtcbiAgICBjbGFzc18yLnByb3RvdHlwZS5idWlsZERlZmF1bHRGb3JtRmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJcIiArIHRoaXMudXNlcm5hbWVBbGlhcyxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZShcIlwiICsgdGhpcy51c2VybmFtZUFsaWFzKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy51c2VySW5wdXQsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXNlcklucHV0ID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgICAgICAgICAgbGFiZWw6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5DT05GSVJNX1NJR05fVVBfQ09ERV9MQUJFTCksXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5DT05GSVJNX1NJR05fVVBfQ09ERV9QTEFDRUhPTERFUiksXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaGludDogKGgoXCJkaXZcIiwgbnVsbCwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkNPTkZJUk1fU0lHTl9VUF9MT1NUX0NPREUpLCAnICcsIGgoXCJhbXBsaWZ5LWJ1dHRvblwiLCB7IHZhcmlhbnQ6IFwiYW5jaG9yXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlc2VuZENvbmZpcm1Db2RlKCk7IH0gfSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkNPTkZJUk1fU0lHTl9VUF9SRVNFTkRfQ09ERSkpKSksXG4gICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2NvZGUnKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfTtcbiAgICBjbGFzc18yLnByb3RvdHlwZS5idWlsZEZvcm1GaWVsZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmZvcm1GaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRGVmYXVsdEZvcm1GaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBuZXdGaWVsZHNfMSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mb3JtRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0ZpZWxkID0gT2JqZWN0LmFzc2lnbih7fSwgZmllbGQpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdGaWVsZC50eXBlID09PSAnY29kZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGRbJ2hpbnQnXSA9IGlzSGludFZhbGlkKG5ld0ZpZWxkKSA/IChoKFwiZGl2XCIsIG51bGwsIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5DT05GSVJNX1NJR05fVVBfTE9TVF9DT0RFKSwgJyAnLCBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZXNlbmRDb25maXJtQ29kZSgpOyB9IH0sIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5DT05GSVJNX1NJR05fVVBfUkVTRU5EX0NPREUpKSkpIDogKG5ld0ZpZWxkWydoaW50J10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdGaWVsZFsnaGFuZGxlSW5wdXRDaGFuZ2UnXSA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRXaXRoQ2FsbGJhY2soZXZlbnQsIGZpZWxkKTsgfTtcbiAgICAgICAgICAgICAgICBuZXdGaWVsZHNfMS5wdXNoKG5ld0ZpZWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gbmV3RmllbGRzXzE7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzIucHJvdG90eXBlLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlID0gZnVuY3Rpb24gKGZpZWxkVHlwZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAndXNlcm5hbWUnOlxuICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIChfdGhpcy51c2VySW5wdXQgPSBldmVudC50YXJnZXQudmFsdWUpOyB9O1xuICAgICAgICAgICAgY2FzZSAncGhvbmVfbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBoYW5kbGVQaG9uZU51bWJlckNoYW5nZShldmVudCwgX3RoaXMucGhvbmVOdW1iZXIpOyB9O1xuICAgICAgICAgICAgY2FzZSAnY29kZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gKF90aGlzLmNvZGUgPSBldmVudC50YXJnZXQudmFsdWUpOyB9O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzIucHJvdG90eXBlLnNldEZpZWxkVmFsdWUgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VySW5wdXQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcklucHV0ID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGhvbmVfbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZGlhbENvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5waG9uZU51bWJlci5jb3VudHJ5RGlhbENvZGVWYWx1ZSA9IGZpZWxkLmRpYWxDb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLnBob25lTnVtYmVyVmFsdWUgPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfMi5wcm90b3R5cGUuaGFuZGxlRm9ybUZpZWxkSW5wdXRXaXRoQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZXZlbnQsIGZpZWxkKSB7XG4gICAgICAgIHZhciBmblRvQ2FsbCA9IGZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddXG4gICAgICAgICAgICA/IGZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddXG4gICAgICAgICAgICA6IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgICAgICAgICAgICAgICBjYihldmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlKGZpZWxkLnR5cGUpO1xuICAgICAgICBmblRvQ2FsbChldmVudCwgY2FsbGJhY2suYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICBjbGFzc18yLnByb3RvdHlwZS5yZXNlbmRDb25maXJtQ29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yXzI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLnJlc2VuZFNpZ25VcCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXNlcklucHV0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihUcmFuc2xhdGlvbnMuRU1QVFlfVVNFUk5BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VySW5wdXQgPSB0aGlzLnVzZXJJbnB1dC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLnJlc2VuZFNpZ25VcCh0aGlzLnVzZXJJbnB1dCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuQ29uZmlybVNpZ25VcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl8yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvLyBUT0RPOiBBZGQgdmFsaWRhdGlvblxuICAgIC8vIFRPRE86IFByZWZpeFxuICAgIGNsYXNzXzIucHJvdG90eXBlLmNvbmZpcm1TaWduVXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbmZpcm1TaWduVXBSZXN1bHQsIGVycm9yXzM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLmNvbmZpcm1TaWduVXAgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9fQVVUSF9NT0RVTEVfRk9VTkQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy51c2VybmFtZUFsaWFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmVfbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcklucHV0ID0gY29tcG9zZVBob25lTnVtYmVySW5wdXQodGhpcy5waG9uZU51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvYXN0SHViRXZlbnQoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNiwgNywgOF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJJbnB1dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoVHJhbnNsYXRpb25zLkVNUFRZX1VTRVJOQU1FKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcklucHV0ID0gdGhpcy51c2VySW5wdXQudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5jb25maXJtU2lnblVwKHRoaXMudXNlcklucHV0LCB0aGlzLmNvZGUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVNpZ25VcFJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybVNpZ25VcFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJMThuLmdldChUcmFuc2xhdGlvbnMuQ09ORklSTV9TSUdOX1VQX0ZBSUxFRCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5fc2lnblVwQXR0cnMgJiYgdGhpcy5fc2lnblVwQXR0cnMucGFzc3dvcmQgJiYgdGhpcy5fc2lnblVwQXR0cnMucGFzc3dvcmQgIT09ICcnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvIHNpZ24gaW4gdXNlciBpZiBwYXNzd29yZCBpcyBhdmFpbGFibGUgZnJvbSBwcmV2aW91cyB3b3JrZmxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaGFuZGxlU2lnbkluKHRoaXMudXNlcklucHV0LCB0aGlzLl9zaWduVXBBdHRycy5wYXNzd29yZCwgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXV0byBzaWduIGluIHVzZXIgaWYgcGFzc3dvcmQgaXMgYXZhaWxhYmxlIGZyb20gcHJldmlvdXMgd29ya2Zsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuU2lnbkluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl8zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhbXBsaWZ5LWZvcm0tc2VjdGlvblwiLCB7IGhlYWRlclRleHQ6IEkxOG4uZ2V0KHRoaXMuaGVhZGVyVGV4dCksIHN1Ym1pdEJ1dHRvblRleHQ6IEkxOG4uZ2V0KHRoaXMuc3VibWl0QnV0dG9uVGV4dCksIGhhbmRsZVN1Ym1pdDogdGhpcy5oYW5kbGVTdWJtaXQsIGxvYWRpbmc6IHRoaXMubG9hZGluZywgc2Vjb25kYXJ5Rm9vdGVyQ29udGVudDogaChcImRpdlwiLCBudWxsLCBoKFwic3BhblwiLCBudWxsLCBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25Jbik7IH0gfSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkJBQ0tfVE9fU0lHTl9JTikpKSkgfSwgaChcImFtcGxpZnktYXV0aC1maWVsZHNcIiwgeyBmb3JtRmllbGRzOiB0aGlzLm5ld0Zvcm1GaWVsZHMgfSkpKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfMiwgXCJ3YXRjaGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBcImZvcm1GaWVsZHNcIjogW1wiZm9ybUZpZWxkc0hhbmRsZXJcIl0sXG4gICAgICAgICAgICAgICAgXCJ1c2VyXCI6IFtcInVzZXJIYW5kbGVyXCJdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsYXNzXzI7XG59KCkpO1xudmFyIGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0ZvcmdvdFBhc3N3b3JkJyk7XG52YXIgQW1wbGlmeUZvcmdvdFBhc3N3b3JkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNsYXNzXzMoaG9zdFJlZikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICAvKiogVGhlIGhlYWRlciB0ZXh0IG9mIHRoZSBmb3Jnb3QgcGFzc3dvcmQgc2VjdGlvbiAqL1xuICAgICAgICB0aGlzLmhlYWRlclRleHQgPSBUcmFuc2xhdGlvbnMuUkVTRVRfWU9VUl9QQVNTV09SRDtcbiAgICAgICAgLyoqIFRoZSB0ZXh0IGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIHNlbmQgY29kZSBidXR0b24gZm9yIHRoZSBmb3JtICovXG4gICAgICAgIHRoaXMuc2VuZEJ1dHRvblRleHQgPSBUcmFuc2xhdGlvbnMuU0VORF9DT0RFO1xuICAgICAgICAvKiogVGhlIHRleHQgZGlzcGxheWVkIGluc2lkZSBvZiB0aGUgc3VibWl0IGJ1dHRvbiBmb3IgdGhlIGZvcm0gKi9cbiAgICAgICAgdGhpcy5zdWJtaXRCdXR0b25UZXh0ID0gVHJhbnNsYXRpb25zLlNVQk1JVDtcbiAgICAgICAgLyoqIFRoZSBmb3JtIGZpZWxkcyBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBmb3Jnb3QgcGFzc3dvcmQgZm9ybSAqL1xuICAgICAgICB0aGlzLmZvcm1GaWVsZHMgPSBbXTtcbiAgICAgICAgLyoqIFRoZSBmdW5jdGlvbiBjYWxsZWQgd2hlbiBtYWtpbmcgYSByZXF1ZXN0IHRvIHJlc2V0IHBhc3N3b3JkICovXG4gICAgICAgIHRoaXMuaGFuZGxlU2VuZCA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuc2VuZChldmVudCk7IH07XG4gICAgICAgIC8qKiBUaGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gc3VibWl0dGluZyBhIG5ldyBwYXNzd29yZCAqL1xuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuc3VibWl0KGV2ZW50KTsgfTtcbiAgICAgICAgLyoqIEF1dGggc3RhdGUgY2hhbmdlIGhhbmRsZXIgZm9yIHRoaXMgY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlID0gZGlzcGF0Y2hBdXRoU3RhdGVDaGFuZ2VFdmVudDtcbiAgICAgICAgLyoqIFVzZXJuYW1lIEFsaWFzIGlzIHVzZWQgdG8gc2V0dXAgYXV0aGVudGljYXRpb24gd2l0aCBgdXNlcm5hbWVgLCBgZW1haWxgIG9yIGBwaG9uZV9udW1iZXJgICAqL1xuICAgICAgICB0aGlzLnVzZXJuYW1lQWxpYXMgPSAndXNlcm5hbWUnO1xuICAgICAgICB0aGlzLmRlbGl2ZXJ5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB7XG4gICAgICAgICAgICBjb3VudHJ5RGlhbENvZGVWYWx1ZTogQ09VTlRSWV9ESUFMX0NPREVfREVGQVVMVCxcbiAgICAgICAgICAgIHBob25lTnVtYmVyVmFsdWU6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubmV3Rm9ybUZpZWxkcyA9IFtdO1xuICAgICAgICB0aGlzLmZvcmdvdFBhc3N3b3JkQXR0cnMgPSB7XG4gICAgICAgICAgICB1c2VySW5wdXQ6ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICAgICAgY29kZTogJycsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNsYXNzXzMucHJvdG90eXBlLmNvbXBvbmVudFdpbGxMb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja1VzZXJuYW1lQWxpYXModGhpcy51c2VybmFtZUFsaWFzKTtcbiAgICAgICAgdGhpcy5idWlsZEZvcm1GaWVsZHMoKTtcbiAgICB9O1xuICAgIGNsYXNzXzMucHJvdG90eXBlLmZvcm1GaWVsZHNIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1aWxkRm9ybUZpZWxkcygpO1xuICAgIH07XG4gICAgY2xhc3NfMy5wcm90b3R5cGUuYnVpbGRGb3JtRmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5mb3JtRmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5idWlsZERlZmF1bHRGb3JtRmllbGRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1GaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RmllbGQgPSBPYmplY3QuYXNzaWduKHt9LCBmaWVsZCk7XG4gICAgICAgICAgICAgICAgbmV3RmllbGRbJ2hhbmRsZUlucHV0Q2hhbmdlJ10gPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0V2l0aENhbGxiYWNrKGV2ZW50LCBmaWVsZCk7IH07XG4gICAgICAgICAgICAgICAgX3RoaXMubmV3Rm9ybUZpZWxkcy5wdXNoKG5ld0ZpZWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjbGFzc18zLnByb3RvdHlwZS5idWlsZERlZmF1bHRGb3JtRmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudXNlcm5hbWVBbGlhcykge1xuICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgIHRoaXMubmV3Rm9ybUZpZWxkcyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2VtYWlsJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdmb3Jnb3QtcGFzc3dvcmQtZW1haWwtaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGhvbmVfbnVtYmVyJzpcbiAgICAgICAgICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwaG9uZV9udW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGhvbmVfbnVtYmVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdmb3Jnb3QtcGFzc3dvcmQtcGhvbmUtbnVtYmVyLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3VzZXJuYW1lJzpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgndXNlcm5hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ2ZvcmdvdC1wYXNzd29yZC11c2VybmFtZS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzMucHJvdG90eXBlLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlID0gZnVuY3Rpb24gKGZpZWxkVHlwZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAndXNlcm5hbWUnOlxuICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIChfdGhpcy5mb3Jnb3RQYXNzd29yZEF0dHJzLnVzZXJJbnB1dCA9IGV2ZW50LnRhcmdldC52YWx1ZSk7IH07XG4gICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIGhhbmRsZVBob25lTnVtYmVyQ2hhbmdlKGV2ZW50LCBfdGhpcy5waG9uZU51bWJlcik7IH07XG4gICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICBjYXNlICdjb2RlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiAoX3RoaXMuZm9yZ290UGFzc3dvcmRBdHRyc1tmaWVsZFR5cGVdID0gZXZlbnQudGFyZ2V0LnZhbHVlKTsgfTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjbGFzc18zLnByb3RvdHlwZS5zZXRGaWVsZFZhbHVlID0gZnVuY3Rpb24gKGZpZWxkLCBmb3JtQXR0cmlidXRlcykge1xuICAgICAgICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3VzZXJuYW1lJzpcbiAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy51c2VySW5wdXQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1BdHRyaWJ1dGVzLnVzZXJJbnB1dCA9IGZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Bob25lX251bWJlcic6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmRpYWxDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGhvbmVOdW1iZXIuY291bnRyeURpYWxDb2RlVmFsdWUgPSBmaWVsZC5kaWFsQ29kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5waG9uZU51bWJlci5waG9uZU51bWJlclZhbHVlID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICBjYXNlICdjb2RlJzpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlc1tmaWVsZC50eXBlXSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybUF0dHJpYnV0ZXNbZmllbGQudHlwZV0gPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzMucHJvdG90eXBlLmhhbmRsZUZvcm1GaWVsZElucHV0V2l0aENhbGxiYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBmaWVsZCkge1xuICAgICAgICB2YXIgZm5Ub0NhbGwgPSBmaWVsZFsnaGFuZGxlSW5wdXRDaGFuZ2UnXVxuICAgICAgICAgICAgPyBmaWVsZFsnaGFuZGxlSW5wdXRDaGFuZ2UnXVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gICAgICAgICAgICAgICAgY2IoZXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZShmaWVsZC50eXBlKTtcbiAgICAgICAgZm5Ub0NhbGwoZXZlbnQsIGNhbGxiYWNrLmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgY2xhc3NfMy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSwgZXJyb3JfNDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUF1dGggfHwgdHlwZW9mIEF1dGguZm9yZ290UGFzc3dvcmQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9fQVVUSF9NT0RVTEVfRk9VTkQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy51c2VybmFtZUFsaWFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmVfbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yZ290UGFzc3dvcmRBdHRycy51c2VySW5wdXQgPSBjb21wb3NlUGhvbmVOdW1iZXJJbnB1dCh0aGlzLnBob25lTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgNCwgNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5mb3Jnb3RQYXNzd29yZCh0aGlzLmZvcmdvdFBhc3N3b3JkQXR0cnMudXNlcklucHV0LnRyaW0oKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2NvZGUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdmb3Jnb3QtcGFzc3dvcmQtY29kZS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGFzc3dvcmQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5ORVdfUEFTU1dPUkRfTEFCRUwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogSTE4bi5nZXQoVHJhbnNsYXRpb25zLk5FV19QQVNTV09SRF9QTEFDRUhPTERFUiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGl2ZXJ5ID0gZGF0YS5Db2RlRGVsaXZlcnlEZXRhaWxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvYXN0SHViRXZlbnQoZXJyb3JfNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGFzc18zLnByb3RvdHlwZS5zdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCB1c2VySW5wdXQsIGNvZGUsIHBhc3N3b3JkLCBkYXRhLCBlcnJvcl81O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXV0aCB8fCB0eXBlb2YgQXV0aC5mb3Jnb3RQYXNzd29yZFN1Ym1pdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcy5mb3Jnb3RQYXNzd29yZEF0dHJzLCB1c2VySW5wdXQgPSBfYS51c2VySW5wdXQsIGNvZGUgPSBfYS5jb2RlLCBwYXNzd29yZCA9IF9hLnBhc3N3b3JkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5mb3Jnb3RQYXNzd29yZFN1Ym1pdCh1c2VySW5wdXQsIGNvZGUsIHBhc3N3b3JkKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuU2lnbkluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsaXZlcnkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvYXN0SHViRXZlbnQoZXJyb3JfNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGFzc18zLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzdWJtaXRGbiA9IHRoaXMuZGVsaXZlcnkgPyBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZVN1Ym1pdChldmVudCk7IH0gOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZVNlbmQoZXZlbnQpOyB9O1xuICAgICAgICB2YXIgc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuZGVsaXZlcnkgPyB0aGlzLnN1Ym1pdEJ1dHRvblRleHQgOiB0aGlzLnNlbmRCdXR0b25UZXh0O1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImFtcGxpZnktZm9ybS1zZWN0aW9uXCIsIHsgaGVhZGVyVGV4dDogSTE4bi5nZXQodGhpcy5oZWFkZXJUZXh0KSwgaGFuZGxlU3VibWl0OiBzdWJtaXRGbiwgbG9hZGluZzogdGhpcy5sb2FkaW5nLCBzZWNvbmRhcnlGb290ZXJDb250ZW50OiBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25Jbik7IH0sIFwiZGF0YS10ZXN0XCI6IFwiZm9yZ290LXBhc3N3b3JkLWJhY2stdG8tc2lnbi1pbi1saW5rXCIgfSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkJBQ0tfVE9fU0lHTl9JTikpLCB0ZXN0RGF0YVByZWZpeDogJ2ZvcmdvdC1wYXNzd29yZCcsIHN1Ym1pdEJ1dHRvblRleHQ6IEkxOG4uZ2V0KHN1Ym1pdEJ1dHRvblRleHQpIH0sIGgoXCJhbXBsaWZ5LWF1dGgtZmllbGRzXCIsIHsgZm9ybUZpZWxkczogdGhpcy5uZXdGb3JtRmllbGRzIH0pKSkpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzMsIFwid2F0Y2hlcnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgXCJmb3JtRmllbGRzXCI6IFtcImZvcm1GaWVsZHNIYW5kbGVyXCJdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsYXNzXzM7XG59KCkpO1xudmFyIGxvZ2dlciQxID0gbmV3IENvbnNvbGVMb2dnZXIoJ2FtcGxpZnktcmVxdWlyZS1uZXctcGFzc3dvcmQnKTtcbnZhciBBbXBsaWZ5UmVxdWlyZU5ld1Bhc3N3b3JkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNsYXNzXzQoaG9zdFJlZikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICAvKiogVGhlIGhlYWRlciB0ZXh0IG9mIHRoZSBmb3Jnb3QgcGFzc3dvcmQgc2VjdGlvbiAqL1xuICAgICAgICB0aGlzLmhlYWRlclRleHQgPSBUcmFuc2xhdGlvbnMuQ0hBTkdFX1BBU1NXT1JEO1xuICAgICAgICAvKiogVGhlIHRleHQgZGlzcGxheWVkIGluc2lkZSBvZiB0aGUgc3VibWl0IGJ1dHRvbiBmb3IgdGhlIGZvcm0gKi9cbiAgICAgICAgdGhpcy5zdWJtaXRCdXR0b25UZXh0ID0gVHJhbnNsYXRpb25zLkNIQU5HRV9QQVNTV09SRF9BQ1RJT047XG4gICAgICAgIC8qKiBUaGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gc3VibWl0dGluZyBhIG5ldyBwYXNzd29yZCAqL1xuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuY29tcGxldGVOZXdQYXNzd29yZChldmVudCk7IH07XG4gICAgICAgIC8qKiBBdXRoIHN0YXRlIGNoYW5nZSBoYW5kbGVyIGZvciB0aGlzIGNvbXBvbmVudCAqL1xuICAgICAgICB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZSA9IGRpc3BhdGNoQXV0aFN0YXRlQ2hhbmdlRXZlbnQ7XG4gICAgICAgIC8qKiBUaGUgZm9ybSBmaWVsZHMgZGlzcGxheWVkIGluc2lkZSBvZiB0aGUgZm9yZ290IHBhc3N3b3JkIGZvcm0gKi9cbiAgICAgICAgdGhpcy5mb3JtRmllbGRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IEF1dGhGb3JtRmllbGQuUGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2UoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGxhYmVsOiBJMThuLmdldChUcmFuc2xhdGlvbnMuTkVXX1BBU1NXT1JEX0xBQkVMKSxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogSTE4bi5nZXQoVHJhbnNsYXRpb25zLk5FV19QQVNTV09SRF9QTEFDRUhPTERFUiksXG4gICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3JlcXVpcmUtbmV3LXBhc3N3b3JkLXBhc3N3b3JkLWlucHV0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVxdWlyZWRBdHRyaWJ1dGVzID0ge307XG4gICAgICAgIHRoaXMubmV3Rm9ybUZpZWxkcyA9IHRoaXMuZm9ybUZpZWxkcztcbiAgICB9XG4gICAgY2xhc3NfNC5wcm90b3R5cGUudXNlckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFVzZXIoKTtcbiAgICB9O1xuICAgIGNsYXNzXzQucHJvdG90eXBlLmhhbmRsZVJlcXVpcmVkQXR0cmlidXRlSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAoYXR0cmlidXRlLCBldmVudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVkQXR0cmlidXRlc1thdHRyaWJ1dGVdID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIH07XG4gICAgY2xhc3NfNC5wcm90b3R5cGUuc2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyLCBlcnJvcl82LCB1c2VyUmVxdWlyZWRBdHRyaWJ1dGVzO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMudXNlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlcigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzYgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvYXN0SHViRXZlbnQoZXJyb3JfNik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudXNlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5jaGFsbGVuZ2VQYXJhbSAmJiB0aGlzLmN1cnJlbnRVc2VyLmNoYWxsZW5nZVBhcmFtLnJlcXVpcmVkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZXF1aXJlZEF0dHJpYnV0ZXMgPSB0aGlzLmN1cnJlbnRVc2VyLmNoYWxsZW5nZVBhcmFtLnJlcXVpcmVkQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyUmVxdWlyZWRBdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybUZpZWxkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcmVxdWlyZWRBdHRyaWJ1dGVzTWFwW2F0dHJpYnV0ZV0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogcmVxdWlyZWRBdHRyaWJ1dGVzTWFwW2F0dHJpYnV0ZV0ucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVSZXF1aXJlZEF0dHJpYnV0ZUlucHV0Q2hhbmdlKGF0dHJpYnV0ZSwgZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiBcInJlcXVpcmUtbmV3LXBhc3N3b3JkLVwiICsgYXR0cmlidXRlICsgXCItaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5ld0Zvcm1GaWVsZHMgPSBfX3NwcmVhZEFycmF5cyhfdGhpcy5uZXdGb3JtRmllbGRzLCBbZm9ybUZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfNC5wcm90b3R5cGUuY29tcG9uZW50V2lsbExvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRVc2VyKCk7XG4gICAgfTtcbiAgICBjbGFzc180LnByb3RvdHlwZS5oYW5kbGVQYXNzd29yZENoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIH07XG4gICAgY2xhc3NfNC5wcm90b3R5cGUuY29tcGxldGVOZXdQYXNzd29yZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlciwgX2EsIGVycm9yXzc7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLmNvbXBsZXRlTmV3UGFzc3dvcmQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9fQVVUSF9NT0RVTEVfRk9VTkQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsxLCA4LCA5LCAxMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5jb21wbGV0ZU5ld1Bhc3N3b3JkKHRoaXMuY3VycmVudFVzZXIsIHRoaXMucGFzc3dvcmQsIHRoaXMucmVxdWlyZWRBdHRyaWJ1dGVzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS5kZWJ1ZygnY29tcGxldGUgbmV3IHBhc3N3b3JkJywgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHVzZXIuY2hhbGxlbmdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENoYWxsZW5nZU5hbWUuU01TTUZBOiByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENoYWxsZW5nZU5hbWUuTUZBU2V0dXA6IHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5Db25maXJtU2lnbkluLCB1c2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS5kZWJ1ZygnVE9UUCBzZXR1cCcsIHVzZXIuY2hhbGxlbmdlUGFyYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlRPVFBTZXR1cCwgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzQgLyp5aWVsZCovLCBjaGVja0NvbnRhY3QodXNlciwgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA3O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNyA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl83KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfNC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImFtcGxpZnktZm9ybS1zZWN0aW9uXCIsIHsgaGVhZGVyVGV4dDogSTE4bi5nZXQodGhpcy5oZWFkZXJUZXh0KSwgaGFuZGxlU3VibWl0OiB0aGlzLmhhbmRsZVN1Ym1pdCwgbG9hZGluZzogdGhpcy5sb2FkaW5nLCBzZWNvbmRhcnlGb290ZXJDb250ZW50OiBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25Jbik7IH0gfSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkJBQ0tfVE9fU0lHTl9JTikpLCBzdWJtaXRCdXR0b25UZXh0OiBJMThuLmdldCh0aGlzLnN1Ym1pdEJ1dHRvblRleHQpIH0sIGgoXCJhbXBsaWZ5LWF1dGgtZmllbGRzXCIsIHsgZm9ybUZpZWxkczogdGhpcy5uZXdGb3JtRmllbGRzIH0pKSkpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzQsIFwid2F0Y2hlcnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgXCJ1c2VyXCI6IFtcInVzZXJIYW5kbGVyXCJdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsYXNzXzQ7XG59KCkpO1xudmFyIGFtcGxpZnlTaWduSW5Dc3MgPSBcIjpob3N0ey0tZm9vdGVyLXNpemU6dmFyKC0tYW1wbGlmeS10ZXh0LXNtKTstLWZvb3Rlci1jb2xvcjp2YXIoLS1hbXBsaWZ5LWdyZXkpOy0tZm9vdGVyLWZvbnQtZmFtaWx5OnZhcigtLWFtcGxpZnktZm9udC1mYW1pbHkpOy0tZm9udC13ZWlnaHQ6dmFyKC0tYW1wbGlmeS1mb250LXdlaWdodCl9LnNpZ24taW4tZm9ybS1mb290ZXJ7Zm9udC1mYW1pbHk6dmFyKC0tZm9vdGVyLWZvbnQtZmFtaWx5KTtmb250LXNpemU6dmFyKC0tZm9vdGVyLXNpemUpO2NvbG9yOnZhcigtLWZvb3Rlci1jb2xvcik7Zm9udC13ZWlnaHQ6LS1mb250LXdlaWdodDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2U7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2U7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstbXMtZmxleC1wYWNrOmRpc3RyaWJ1dGU7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH0uc2lnbi1pbi1mb3JtLWZvb3RlciBhbXBsaWZ5LWJ1dHRvbnttYXJnaW4tYm90dG9tOjAuNjI1cmVtfUBtZWRpYSAobWluLXdpZHRoOiA2NzJweCl7LnNpZ24taW4tZm9ybS1mb290ZXJ7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LWRpcmVjdGlvbjpyb3c7LW1zLWZsZXgtcGFjazpqdXN0aWZ5O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOy1tcy1mbGV4LWFsaWduOmJhc2VsaW5lO2FsaWduLWl0ZW1zOmJhc2VsaW5lfS5zaWduLWluLWZvcm0tZm9vdGVyIGFtcGxpZnktYnV0dG9ue21hcmdpbi1ib3R0b206MH19LnNpZ24taW4tZm9ybS1mb290ZXIgKisqe21hcmdpbi1ib3R0b206MTVweH1cIjtcbnZhciBBbXBsaWZ5U2lnbkluID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNsYXNzXzUoaG9zdFJlZikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICAvKiogRmlyZXMgd2hlbiBzaWduIGluIGZvcm0gaXMgc3VibWl0dGVkICovXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5zaWduSW4oZXZlbnQpOyB9O1xuICAgICAgICAvKiogVXNlZCBmb3IgaGVhZGVyIHRleHQgaW4gc2lnbiBpbiBjb21wb25lbnQgKi9cbiAgICAgICAgdGhpcy5oZWFkZXJUZXh0ID0gVHJhbnNsYXRpb25zLlNJR05fSU5fSEVBREVSX1RFWFQ7XG4gICAgICAgIC8qKiBVc2VkIGZvciB0aGUgc3VibWl0IGJ1dHRvbiB0ZXh0IGluIHNpZ24gaW4gY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uVGV4dCA9IFRyYW5zbGF0aW9ucy5TSUdOX0lOX0FDVElPTjtcbiAgICAgICAgLyoqIEF1dGggc3RhdGUgY2hhbmdlIGhhbmRsZXIgZm9yIHRoaXMgY29tcG9uZW50ICovXG4gICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlID0gZGlzcGF0Y2hBdXRoU3RhdGVDaGFuZ2VFdmVudDtcbiAgICAgICAgLyoqIFVzZXJuYW1lIEFsaWFzIGlzIHVzZWQgdG8gc2V0dXAgYXV0aGVudGljYXRpb24gd2l0aCBgdXNlcm5hbWVgLCBgZW1haWxgIG9yIGBwaG9uZV9udW1iZXJgICAqL1xuICAgICAgICB0aGlzLnVzZXJuYW1lQWxpYXMgPSAndXNlcm5hbWUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBmaWVsZHMgYWxsb3dzIHlvdSB0byB1dGlsaXplIG91ciBwcmUtYnVpbHQgY29tcG9uZW50cyBzdWNoIGFzIHVzZXJuYW1lIGZpZWxkLCBjb2RlIGZpZWxkLCBwYXNzd29yZCBmaWVsZCwgZW1haWwgZmllbGQsIGV0Yy5cbiAgICAgICAgICogYnkgcGFzc2luZyBhbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIG9yZGVyIG9mIHRoZSBmb3JtIHRvIGJlIGluLiBJZiB5b3UgbmVlZCBtb3JlIGN1c3RvbWl6YXRpb24sIHN1Y2ggYXMgY2hhbmdpbmdcbiAgICAgICAgICogdGV4dCBmb3IgYSBsYWJlbCBvciBhZGp1c3QgYSBwbGFjZWhvbGRlciwgeW91IGNhbiBmb2xsb3cgdGhlIHN0cnVjdHVyZSBiZWxvdyBpbiBvcmRlciB0byBkbyBqdXN0IHRoYXQuXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKiBbXG4gICAgICAgICAqICB7XG4gICAgICAgICAqICAgIHR5cGU6IHN0cmluZyxcbiAgICAgICAgICogICAgbGFiZWw6IHN0cmluZyxcbiAgICAgICAgICogICAgcGxhY2Vob2xkZXI6IHN0cmluZyxcbiAgICAgICAgICogICAgaGludDogc3RyaW5nIHwgRnVuY3Rpb25hbCBDb21wb25lbnQgfCBudWxsLFxuICAgICAgICAgKiAgICByZXF1aXJlZDogYm9vbGVhblxuICAgICAgICAgKiAgfVxuICAgICAgICAgKiBdXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb3JtRmllbGRzID0gW107XG4gICAgICAgIC8qKiBIaWRlcyB0aGUgc2lnbiB1cCBsaW5rICovXG4gICAgICAgIHRoaXMuaGlkZVNpZ25VcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBbXTtcbiAgICAgICAgLyogV2hldGhlciBvciBub3QgdGhlIHNpZ24taW4gY29tcG9uZW50IGlzIGxvYWRpbmcgKi9cbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB7XG4gICAgICAgICAgICBjb3VudHJ5RGlhbENvZGVWYWx1ZTogQ09VTlRSWV9ESUFMX0NPREVfREVGQVVMVCxcbiAgICAgICAgICAgIHBob25lTnVtYmVyVmFsdWU6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2lnbkluQXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgIHVzZXJJbnB1dDogJycsXG4gICAgICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNsYXNzXzUucHJvdG90eXBlLmNvbXBvbmVudFdpbGxMb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja1VzZXJuYW1lQWxpYXModGhpcy51c2VybmFtZUFsaWFzKTtcbiAgICAgICAgdGhpcy5idWlsZEZvcm1GaWVsZHMoKTtcbiAgICB9O1xuICAgIGNsYXNzXzUucHJvdG90eXBlLmZvcm1GaWVsZHNIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1aWxkRm9ybUZpZWxkcygpO1xuICAgIH07XG4gICAgY2xhc3NfNS5wcm90b3R5cGUuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAoZmllbGRUeXBlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHN3aXRjaCAoZmllbGRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gKF90aGlzLnNpZ25JbkF0dHJpYnV0ZXMudXNlcklucHV0ID0gZXZlbnQudGFyZ2V0LnZhbHVlKTsgfTtcbiAgICAgICAgICAgIGNhc2UgJ3Bob25lX251bWJlcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UoZXZlbnQsIF90aGlzLnBob25lTnVtYmVyKTsgfTtcbiAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiAoX3RoaXMuc2lnbkluQXR0cmlidXRlcy5wYXNzd29yZCA9IGV2ZW50LnRhcmdldC52YWx1ZSk7IH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzUucHJvdG90eXBlLmhhbmRsZUZvcm1GaWVsZElucHV0V2l0aENhbGxiYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBmaWVsZCkge1xuICAgICAgICB2YXIgZm5Ub0NhbGwgPSBmaWVsZFsnaGFuZGxlSW5wdXRDaGFuZ2UnXVxuICAgICAgICAgICAgPyBmaWVsZFsnaGFuZGxlSW5wdXRDaGFuZ2UnXVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gICAgICAgICAgICAgICAgY2IoZXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZShmaWVsZC50eXBlKTtcbiAgICAgICAgZm5Ub0NhbGwoZXZlbnQsIGNhbGxiYWNrLmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgY2xhc3NfNS5wcm90b3R5cGUuc2lnbkluID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VybmFtZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIHN1Ym1pdHRpbmcgdGhlIGZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnVzZXJuYW1lQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduSW5BdHRyaWJ1dGVzLnVzZXJJbnB1dCA9IGNvbXBvc2VQaG9uZU51bWJlcklucHV0KHRoaXMucGhvbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hUb2FzdEh1YkV2ZW50KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSB0aGlzLnNpZ25JbkF0dHJpYnV0ZXMudXNlcklucHV0LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGhhbmRsZVNpZ25Jbih1c2VybmFtZSwgdGhpcy5zaWduSW5BdHRyaWJ1dGVzLnBhc3N3b3JkLCB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGFzc181LnByb3RvdHlwZS5idWlsZERlZmF1bHRGb3JtRmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZm9ybUZpZWxkSW5wdXRzID0gW107XG4gICAgICAgIHN3aXRjaCAodGhpcy51c2VybmFtZUFsaWFzKSB7XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgZm9ybUZpZWxkSW5wdXRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2VtYWlsJyksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi1pbi1lbWFpbC1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgIGZvcm1GaWVsZElucHV0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bob25lX251bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGhvbmVfbnVtYmVyJyksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi1pbi1waG9uZS1udW1iZXItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXNlcm5hbWUnOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmb3JtRmllbGRJbnB1dHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgndXNlcm5hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdzaWduLWluLXVzZXJuYW1lLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBmb3JtRmllbGRJbnB1dHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgaGludDogKGgoXCJkaXZcIiwgbnVsbCwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLkZPUkdPVF9QQVNTV09SRF9URVhUKSwgJyAnLCBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLkZvcmdvdFBhc3N3b3JkKTsgfSwgXCJkYXRhLXRlc3RcIjogXCJzaWduLWluLWZvcmdvdC1wYXNzd29yZC1saW5rXCIgfSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLlJFU0VUX1BBU1NXT1JEX1RFWFQpKSkpLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGFzc3dvcmQnKSxcbiAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3NpZ24taW4tcGFzc3dvcmQtaW5wdXQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmV3Rm9ybUZpZWxkcyA9IF9fc3ByZWFkQXJyYXlzKGZvcm1GaWVsZElucHV0cyk7XG4gICAgfTtcbiAgICBjbGFzc181LnByb3RvdHlwZS5idWlsZEZvcm1GaWVsZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmZvcm1GaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRGVmYXVsdEZvcm1GaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBuZXdGaWVsZHNfMiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mb3JtRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0ZpZWxkID0gT2JqZWN0LmFzc2lnbih7fSwgZmllbGQpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBoaW50IGJldHRlclxuICAgICAgICAgICAgICAgIGlmIChuZXdGaWVsZC50eXBlID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkWydoaW50J10gPSBpc0hpbnRWYWxpZChuZXdGaWVsZCkgPyAoaChcImRpdlwiLCBudWxsLCBJMThuLmdldChUcmFuc2xhdGlvbnMuRk9SR09UX1BBU1NXT1JEX1RFWFQpLCAnICcsIGgoXCJhbXBsaWZ5LWJ1dHRvblwiLCB7IHZhcmlhbnQ6IFwiYW5jaG9yXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuRm9yZ290UGFzc3dvcmQpOyB9LCBcImRhdGEtdGVzdFwiOiBcInNpZ24taW4tZm9yZ290LXBhc3N3b3JkLWxpbmtcIiB9LCBJMThuLmdldChUcmFuc2xhdGlvbnMuUkVTRVRfUEFTU1dPUkRfVEVYVCkpKSkgOiAobmV3RmllbGRbJ2hpbnQnXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dFdpdGhDYWxsYmFjayhldmVudCwgZmllbGQpOyB9O1xuICAgICAgICAgICAgICAgIF90aGlzLnNldEZpZWxkVmFsdWUobmV3RmllbGQsIF90aGlzLnNpZ25JbkF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgIG5ld0ZpZWxkc18yLnB1c2gobmV3RmllbGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBuZXdGaWVsZHNfMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfNS5wcm90b3R5cGUuc2V0RmllbGRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZm9ybUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybUF0dHJpYnV0ZXMudXNlcklucHV0ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy51c2VySW5wdXQgPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5kaWFsQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLmNvdW50cnlEaWFsQ29kZVZhbHVlID0gZmllbGQuZGlhbENvZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGhvbmVOdW1iZXIucGhvbmVOdW1iZXJWYWx1ZSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1BdHRyaWJ1dGVzLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy5wYXNzd29yZCA9IGZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfNS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImFtcGxpZnktZm9ybS1zZWN0aW9uXCIsIHsgaGVhZGVyVGV4dDogSTE4bi5nZXQodGhpcy5oZWFkZXJUZXh0KSwgaGFuZGxlU3VibWl0OiB0aGlzLmhhbmRsZVN1Ym1pdCwgdGVzdERhdGFQcmVmaXg6ICdzaWduLWluJyB9LCBoKFwiZGl2XCIsIHsgc2xvdDogXCJzdWJ0aXRsZVwiIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJoZWFkZXItc3VidGl0bGVcIiB9KSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJmZWRlcmF0ZWQtYnV0dG9uc1wiIH0sIGgoXCJhbXBsaWZ5LWZlZGVyYXRlZC1idXR0b25zXCIsIHsgaGFuZGxlQXV0aFN0YXRlQ2hhbmdlOiB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZSwgZmVkZXJhdGVkOiB0aGlzLmZlZGVyYXRlZCB9KSksICFpc0VtcHR5KHRoaXMuZmVkZXJhdGVkKSAmJiBoKFwiYW1wbGlmeS1zdHJpa2VcIiwgbnVsbCwgXCJvclwiKSwgaChcImFtcGxpZnktYXV0aC1maWVsZHNcIiwgeyBmb3JtRmllbGRzOiB0aGlzLm5ld0Zvcm1GaWVsZHMgfSksIGgoXCJkaXZcIiwgeyBzbG90OiBcImFtcGxpZnktZm9ybS1zZWN0aW9uLWZvb3RlclwiLCBjbGFzczogXCJzaWduLWluLWZvcm0tZm9vdGVyXCIgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImZvb3RlclwiIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJzZWNvbmRhcnktZm9vdGVyLWNvbnRlbnRcIiB9LCAhdGhpcy5oaWRlU2lnblVwID8gKGgoXCJzcGFuXCIsIG51bGwsIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5OT19BQ0NPVU5UX1RFWFQpLCAnICcsIGgoXCJhbXBsaWZ5LWJ1dHRvblwiLCB7IHZhcmlhbnQ6IFwiYW5jaG9yXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuU2lnblVwKTsgfSwgXCJkYXRhLXRlc3RcIjogXCJzaWduLWluLWNyZWF0ZS1hY2NvdW50LWxpbmtcIiB9LCBJMThuLmdldChUcmFuc2xhdGlvbnMuQ1JFQVRFX0FDQ09VTlRfVEVYVCkpKSkgOiAoaChcInNwYW5cIiwgbnVsbCkpKSwgaChcInNsb3RcIiwgeyBuYW1lOiBcInByaW1hcnktZm9vdGVyLWNvbnRlbnRcIiB9LCBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBkaXNhYmxlZDogdGhpcy5sb2FkaW5nLCBcImRhdGEtdGVzdFwiOiBcInNpZ24taW4tc2lnbi1pbi1idXR0b25cIiB9LCB0aGlzLmxvYWRpbmcgPyBoKFwiYW1wbGlmeS1sb2FkaW5nLXNwaW5uZXJcIiwgbnVsbCkgOiBoKFwic3BhblwiLCBudWxsLCBJMThuLmdldCh0aGlzLnN1Ym1pdEJ1dHRvblRleHQpKSkpKSkpKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfNSwgXCJ3YXRjaGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBcImZvcm1GaWVsZHNcIjogW1wiZm9ybUZpZWxkc0hhbmRsZXJcIl1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gY2xhc3NfNTtcbn0oKSk7XG5BbXBsaWZ5U2lnbkluLnN0eWxlID0gYW1wbGlmeVNpZ25JbkNzcztcbnZhciBhbXBsaWZ5U2lnblVwQ3NzID0gXCI6aG9zdHstLWZvb3Rlci1mb250LWZhbWlseTp2YXIoLS1hbXBsaWZ5LWZvbnQtZmFtaWx5KTstLWZvb3Rlci1mb250LXNpemU6dmFyKC0tYW1wbGlmeS10ZXh0LXNtKTstLWZvb3Rlci1jb2xvcjp2YXIoLS1hbXBsaWZ5LWdyZXkpOy0tZm9udC13ZWlnaHQ6dmFyKC0tYW1wbGlmeS1mb250LXdlaWdodCl9LnNpZ24tdXAtZm9ybS1mb290ZXJ7Zm9udC1mYW1pbHk6dmFyKC0tZm9vdGVyLWZvbnQtZmFtaWx5KTtmb250LXNpemU6dmFyKC0tZm9vdGVyLWZvbnQtc2l6ZSk7Y29sb3I6dmFyKC0tZm9vdGVyLWNvbG9yKTtmb250LXdlaWdodDotLWZvbnQtd2VpZ2h0O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW4tcmV2ZXJzZTtmbGV4LWRpcmVjdGlvbjpjb2x1bW4tcmV2ZXJzZTstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LXBhY2s6ZGlzdHJpYnV0ZTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfS5zaWduLXVwLWZvcm0tZm9vdGVyIGFtcGxpZnktYnV0dG9ue21hcmdpbi1ib3R0b206MC42MjVyZW19QG1lZGlhIChtaW4td2lkdGg6IDY3MnB4KXsuc2lnbi11cC1mb3JtLWZvb3RlcntkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtZGlyZWN0aW9uOnJvdzstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47LW1zLWZsZXgtYWxpZ246YmFzZWxpbmU7YWxpZ24taXRlbXM6YmFzZWxpbmV9LnNpZ24tdXAtZm9ybS1mb290ZXIgYW1wbGlmeS1idXR0b257bWFyZ2luLWJvdHRvbTowfX0uc2lnbi11cC1mb3JtLWZvb3RlciAqKyp7bWFyZ2luLWJvdHRvbToxNXB4fVwiO1xudmFyIEFtcGxpZnlTaWduVXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY2xhc3NfNihob3N0UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIC8qKiBGaXJlcyB3aGVuIHNpZ24gdXAgZm9ybSBpcyBzdWJtaXR0ZWQgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnNpZ25VcChldmVudCk7IH07XG4gICAgICAgIC8qKiBVc2VkIGZvciBoZWFkZXIgdGV4dCBpbiBzaWduIHVwIGNvbXBvbmVudCAqL1xuICAgICAgICB0aGlzLmhlYWRlclRleHQgPSBUcmFuc2xhdGlvbnMuU0lHTl9VUF9IRUFERVJfVEVYVDtcbiAgICAgICAgLyoqIFVzZWQgZm9yIHRoZSBzdWJtaXQgYnV0dG9uIHRleHQgaW4gc2lnbiB1cCBjb21wb25lbnQgKi9cbiAgICAgICAgdGhpcy5zdWJtaXRCdXR0b25UZXh0ID0gVHJhbnNsYXRpb25zLlNJR05fVVBfU1VCTUlUX0JVVFRPTl9URVhUO1xuICAgICAgICAvKiogVXNlZCBmb3IgdGhlIHN1Ym1pdCBidXR0b24gdGV4dCBpbiBzaWduIHVwIGNvbXBvbmVudCAqL1xuICAgICAgICB0aGlzLmhhdmVBY2NvdW50VGV4dCA9IFRyYW5zbGF0aW9ucy5TSUdOX1VQX0hBVkVfQUNDT1VOVF9URVhUO1xuICAgICAgICAvKiogVGV4dCB1c2VkIGZvciB0aGUgc2lnbiBpbiBoeXBlcmxpbmsgKi9cbiAgICAgICAgdGhpcy5zaWduSW5UZXh0ID0gVHJhbnNsYXRpb25zLlNJR05fSU5fVEVYVDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvcm0gZmllbGRzIGFsbG93cyB5b3UgdG8gdXRpbGl6ZSBvdXIgcHJlLWJ1aWx0IGNvbXBvbmVudHMgc3VjaCBhcyB1c2VybmFtZSBmaWVsZCwgY29kZSBmaWVsZCwgcGFzc3dvcmQgZmllbGQsIGVtYWlsIGZpZWxkLCBldGMuXG4gICAgICAgICAqIGJ5IHBhc3NpbmcgYW4gYXJyYXkgb2Ygc3RyaW5ncyB0aGF0IHlvdSB3b3VsZCBsaWtlIHRoZSBvcmRlciBvZiB0aGUgZm9ybSB0byBiZSBpbi4gSWYgeW91IG5lZWQgbW9yZSBjdXN0b21pemF0aW9uLCBzdWNoIGFzIGNoYW5naW5nXG4gICAgICAgICAqIHRleHQgZm9yIGEgbGFiZWwgb3IgYWRqdXN0IGEgcGxhY2Vob2xkZXIsIHlvdSBjYW4gZm9sbG93IHRoZSBzdHJ1Y3R1cmUgYmVsb3cgaW4gb3JkZXIgdG8gZG8ganVzdCB0aGF0LlxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICogW1xuICAgICAgICAgKiAge1xuICAgICAgICAgKiAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgICAqICAgIGxhYmVsOiBzdHJpbmcsXG4gICAgICAgICAqICAgIHBsYWNlaG9sZGVyOiBzdHJpbmcsXG4gICAgICAgICAqICAgIGhpbnQ6IHN0cmluZyB8IEZ1bmN0aW9uYWwgQ29tcG9uZW50IHwgbnVsbCxcbiAgICAgICAgICogICAgcmVxdWlyZWQ6IGJvb2xlYW5cbiAgICAgICAgICogIH1cbiAgICAgICAgICogXVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9ybUZpZWxkcyA9IFtdO1xuICAgICAgICAvKiogQXV0aCBzdGF0ZSBjaGFuZ2UgaGFuZGxlciBmb3IgdGhpcyBjb21wb25lbnRcbiAgICAgICAgICogZS5nLiBTaWduSW4gLT4gJ0NyZWF0ZSBBY2NvdW50JyBsaW5rIC0+IFNpZ25VcFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UgPSBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50O1xuICAgICAgICAvKiogVXNlcm5hbWUgQWxpYXMgaXMgdXNlZCB0byBzZXR1cCBhdXRoZW50aWNhdGlvbiB3aXRoIGB1c2VybmFtZWAsIGBlbWFpbGAgb3IgYHBob25lX251bWJlcmAgICovXG4gICAgICAgIHRoaXMudXNlcm5hbWVBbGlhcyA9ICd1c2VybmFtZSc7XG4gICAgICAgIC8vIHByaXZhdGUgdXNlcklucHV0OiBzdHJpbmcgfCBQaG9uZU51bWJlckludGVyZmFjZTtcbiAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW107XG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB7XG4gICAgICAgICAgICBjb3VudHJ5RGlhbENvZGVWYWx1ZTogQ09VTlRSWV9ESUFMX0NPREVfREVGQVVMVCxcbiAgICAgICAgICAgIHBob25lTnVtYmVyVmFsdWU6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNpZ25VcEF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2xhc3NfNi5wcm90b3R5cGUuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAoZmllbGRUeXBlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHN3aXRjaCAoZmllbGRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gKF90aGlzLnNpZ25VcEF0dHJpYnV0ZXMudXNlcm5hbWUgPSBldmVudC50YXJnZXQudmFsdWUpOyB9O1xuICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIChfdGhpcy5zaWduVXBBdHRyaWJ1dGVzLnBhc3N3b3JkID0gZXZlbnQudGFyZ2V0LnZhbHVlKTsgfTtcbiAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiAoX3RoaXMuc2lnblVwQXR0cmlidXRlcy5hdHRyaWJ1dGVzLmVtYWlsID0gZXZlbnQudGFyZ2V0LnZhbHVlKTsgfTtcbiAgICAgICAgICAgIGNhc2UgJ3Bob25lX251bWJlcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gaGFuZGxlUGhvbmVOdW1iZXJDaGFuZ2UoZXZlbnQsIF90aGlzLnBob25lTnVtYmVyKTsgfTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gKF90aGlzLnNpZ25VcEF0dHJpYnV0ZXMuYXR0cmlidXRlc1tmaWVsZFR5cGVdID0gZXZlbnQudGFyZ2V0LnZhbHVlKTsgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfNi5wcm90b3R5cGUuaGFuZGxlRm9ybUZpZWxkSW5wdXRXaXRoQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZXZlbnQsIGZpZWxkKSB7XG4gICAgICAgIHZhciBmblRvQ2FsbCA9IGZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddXG4gICAgICAgICAgICA/IGZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddXG4gICAgICAgICAgICA6IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgICAgICAgICAgICAgICBjYihldmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlKGZpZWxkLnR5cGUpO1xuICAgICAgICBmblRvQ2FsbChldmVudCwgY2FsbGJhY2suYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICAvLyBUT0RPOiBBZGQgdmFsaWRhdGlvblxuICAgIC8vIFRPRE86IFByZWZpeFxuICAgIGNsYXNzXzYucHJvdG90eXBlLnNpZ25VcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSwgc2lnblVwQXR0cnMsIGVycm9yXzg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLnNpZ25VcCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGhvbmVOdW1iZXIucGhvbmVOdW1iZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2lnblVwQXR0cmlidXRlcy5hdHRyaWJ1dGVzLnBob25lX251bWJlciA9IGNvbXBvc2VQaG9uZU51bWJlcklucHV0KHRoaXMucGhvbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hUb2FzdEh1YkV2ZW50KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudXNlcm5hbWVBbGlhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25VcEF0dHJpYnV0ZXMudXNlcm5hbWUgPSB0aGlzLnNpZ25VcEF0dHJpYnV0ZXMuYXR0cmlidXRlc1t0aGlzLnVzZXJuYW1lQWxpYXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA2LCA3LCA4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2lnblVwQXR0cmlidXRlcy51c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihUcmFuc2xhdGlvbnMuRU1QVFlfVVNFUk5BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2lnblVwQXR0cmlidXRlcy51c2VybmFtZS5pbmRleE9mKCcgJykgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihUcmFuc2xhdGlvbnMuVVNFUk5BTUVfUkVNT1ZFX1dISVRFU1BBQ0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2lnblVwQXR0cmlidXRlcy5wYXNzd29yZCAhPT0gdGhpcy5zaWduVXBBdHRyaWJ1dGVzLnBhc3N3b3JkLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihUcmFuc2xhdGlvbnMuUEFTU1dPUkRfUkVNT1ZFX1dISVRFU1BBQ0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5zaWduVXAodGhpcy5zaWduVXBBdHRyaWJ1dGVzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoVHJhbnNsYXRpb25zLlNJR05fVVBfRkFJTEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS51c2VyQ29uZmlybWVkKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGhhbmRsZVNpZ25Jbih0aGlzLnNpZ25VcEF0dHJpYnV0ZXMudXNlcm5hbWUsIHRoaXMuc2lnblVwQXR0cmlidXRlcy5wYXNzd29yZCwgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25VcEF0dHJzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zaWduVXBBdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5Db25maXJtU2lnblVwLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRhdGEudXNlciksIHsgc2lnblVwQXR0cnM6IHNpZ25VcEF0dHJzIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfOCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl84KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzYucHJvdG90eXBlLmJ1aWxkRGVmYXVsdEZvcm1GaWVsZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy51c2VybmFtZUFsaWFzKSB7XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX1VQX0VNQUlMX1BMQUNFSE9MREVSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2VtYWlsJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdzaWduLXVwLWVtYWlsLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogSTE4bi5nZXQoVHJhbnNsYXRpb25zLlNJR05fVVBfUEFTU1dPUkRfUExBQ0VIT0xERVIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGFzc3dvcmQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3NpZ24tdXAtcGFzc3dvcmQtaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bob25lX251bWJlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUlucHV0Q2hhbmdlOiB0aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlKCdwaG9uZV9udW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3NpZ24tdXAtcGhvbmUtbnVtYmVyLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Bob25lX251bWJlcic6XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGhvbmVfbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ3Bob25lX251bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi11cC1waG9uZS1udW1iZXItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBJMThuLmdldChUcmFuc2xhdGlvbnMuU0lHTl9VUF9QQVNTV09SRF9QTEFDRUhPTERFUiksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUlucHV0Q2hhbmdlOiB0aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlKCdwYXNzd29yZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi11cC1wYXNzd29yZC1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX1VQX0VNQUlMX1BMQUNFSE9MREVSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ2VtYWlsJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdzaWduLXVwLWVtYWlsLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3VzZXJuYW1lJzpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdGb3JtRmllbGRzID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX1VQX1VTRVJOQU1FX1BMQUNFSE9MREVSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ3VzZXJuYW1lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdCc6ICdzaWduLXVwLXVzZXJuYW1lLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogSTE4bi5nZXQoVHJhbnNsYXRpb25zLlNJR05fVVBfUEFTU1dPUkRfUExBQ0VIT0xERVIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dENoYW5nZSgncGFzc3dvcmQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3NpZ24tdXAtcGFzc3dvcmQtaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBJMThuLmdldChUcmFuc2xhdGlvbnMuU0lHTl9VUF9FTUFJTF9QTEFDRUhPTERFUiksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUlucHV0Q2hhbmdlOiB0aGlzLmhhbmRsZUZvcm1GaWVsZElucHV0Q2hhbmdlKCdlbWFpbCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi11cC1lbWFpbC1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGhvbmVfbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlRm9ybUZpZWxkSW5wdXRDaGFuZ2UoJ3Bob25lX251bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAnc2lnbi11cC1waG9uZS1udW1iZXItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjbGFzc182LnByb3RvdHlwZS5idWlsZEZvcm1GaWVsZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmZvcm1GaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRGVmYXVsdEZvcm1GaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBuZXdGaWVsZHNfMyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mb3JtRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0ZpZWxkID0gT2JqZWN0LmFzc2lnbih7fSwgZmllbGQpO1xuICAgICAgICAgICAgICAgIG5ld0ZpZWxkWydoYW5kbGVJbnB1dENoYW5nZSddID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVGb3JtRmllbGRJbnB1dFdpdGhDYWxsYmFjayhldmVudCwgZmllbGQpOyB9O1xuICAgICAgICAgICAgICAgIF90aGlzLnNldEZpZWxkVmFsdWUoZmllbGQsIF90aGlzLnNpZ25VcEF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgIG5ld0ZpZWxkc18zLnB1c2gobmV3RmllbGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm5ld0Zvcm1GaWVsZHMgPSBuZXdGaWVsZHNfMztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfNi5wcm90b3R5cGUuc2V0RmllbGRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZm9ybUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybUF0dHJpYnV0ZXMudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1BdHRyaWJ1dGVzLnVzZXJuYW1lID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1BdHRyaWJ1dGVzLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy5wYXNzd29yZCA9IGZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy5hdHRyaWJ1dGVzLmVtYWlsID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwaG9uZV9udW1iZXInOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5kaWFsQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLmNvdW50cnlEaWFsQ29kZVZhbHVlID0gZmllbGQuZGlhbENvZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGhvbmVOdW1iZXIucGhvbmVOdW1iZXJWYWx1ZSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmb3JtQXR0cmlidXRlcy5hdHRyaWJ1dGVzW2ZpZWxkLnR5cGVdID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzYucHJvdG90eXBlLmNvbXBvbmVudFdpbGxMb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja1VzZXJuYW1lQWxpYXModGhpcy51c2VybmFtZUFsaWFzKTtcbiAgICAgICAgdGhpcy5idWlsZEZvcm1GaWVsZHMoKTtcbiAgICB9O1xuICAgIGNsYXNzXzYucHJvdG90eXBlLmZvcm1GaWVsZHNIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1aWxkRm9ybUZpZWxkcygpO1xuICAgIH07XG4gICAgY2xhc3NfNi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImFtcGxpZnktZm9ybS1zZWN0aW9uXCIsIHsgaGVhZGVyVGV4dDogSTE4bi5nZXQodGhpcy5oZWFkZXJUZXh0KSwgaGFuZGxlU3VibWl0OiB0aGlzLmhhbmRsZVN1Ym1pdCwgdGVzdERhdGFQcmVmaXg6ICdzaWduLXVwJyB9LCBoKFwiZGl2XCIsIHsgc2xvdDogXCJzdWJ0aXRsZVwiIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJoZWFkZXItc3VidGl0bGVcIiB9KSksIGgoXCJhbXBsaWZ5LWF1dGgtZmllbGRzXCIsIHsgZm9ybUZpZWxkczogdGhpcy5uZXdGb3JtRmllbGRzIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2lnbi11cC1mb3JtLWZvb3RlclwiLCBzbG90OiBcImFtcGxpZnktZm9ybS1zZWN0aW9uLWZvb3RlclwiIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJmb290ZXJcIiB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFwic2Vjb25kYXJ5LWZvb3Rlci1jb250ZW50XCIgfSwgaChcInNwYW5cIiwgbnVsbCwgSTE4bi5nZXQodGhpcy5oYXZlQWNjb3VudFRleHQpLCAnICcsIGgoXCJhbXBsaWZ5LWJ1dHRvblwiLCB7IHZhcmlhbnQ6IFwiYW5jaG9yXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuU2lnbkluKTsgfSwgXCJkYXRhLXRlc3RcIjogXCJzaWduLXVwLXNpZ24taW4tbGlua1wiIH0sIEkxOG4uZ2V0KHRoaXMuc2lnbkluVGV4dCkpKSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJwcmltYXJ5LWZvb3Rlci1jb250ZW50XCIgfSwgaChcImFtcGxpZnktYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgXCJkYXRhLXRlc3RcIjogXCJzaWduLXVwLWNyZWF0ZS1hY2NvdW50LWJ1dHRvblwiIH0sIHRoaXMubG9hZGluZyA/IGgoXCJhbXBsaWZ5LWxvYWRpbmctc3Bpbm5lclwiLCBudWxsKSA6IGgoXCJzcGFuXCIsIG51bGwsIEkxOG4uZ2V0KHRoaXMuc3VibWl0QnV0dG9uVGV4dCkpKSkpKSkpKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc182LCBcIndhdGNoZXJzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFwiZm9ybUZpZWxkc1wiOiBbXCJmb3JtRmllbGRzSGFuZGxlclwiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBjbGFzc182O1xufSgpKTtcbkFtcGxpZnlTaWduVXAuc3R5bGUgPSBhbXBsaWZ5U2lnblVwQ3NzO1xudmFyIGxvZ2dlciQyID0gbmV3IExvZ2dlcignQW1wbGlmeVZlcmlmeUNvbnRhY3QnKTtcbnZhciBBbXBsaWZ5VmVyaWZ5Q29udGFjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjbGFzc183KGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgLyoqIEF1dGhlbnRpY2F0aW9uIHN0YXRlIGhhbmRsZXIgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UgPSBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50O1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgY2xhc3NfNy5wcm90b3R5cGUuaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMudmVyaWZ5QXR0ciA/IHRoaXMuc3VibWl0KHRoaXMuY29kZSkgOiB0aGlzLnZlcmlmeSh0aGlzLmNvbnRhY3QpO1xuICAgIH07XG4gICAgY2xhc3NfNy5wcm90b3R5cGUuc3VibWl0ID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF0dHIsIGRhdGEsIGVycm9yXzk7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyID0gdGhpcy52ZXJpZnlBdHRyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLnZlcmlmeUN1cnJlbnRVc2VyQXR0cmlidXRlU3VibWl0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PX0FVVEhfTU9EVUxFX0ZPVU5EKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgNCwgNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC52ZXJpZnlDdXJyZW50VXNlckF0dHJpYnV0ZVN1Ym1pdChhdHRyLCBjb2RlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMi5kZWJ1ZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5TaWduZWRJbiwgdGhpcy51c2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmVyaWZ5QXR0ciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfOSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl85KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlciQyLmVycm9yKGVycm9yXzkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfNy5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gKGNvbnRhY3QpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRhdGEsIGVycm9yXzEwO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDIuZXJyb3IoJ05laXRoZXIgRW1haWwgbm9yIFBob25lIE51bWJlciBzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXV0aCB8fCB0eXBlb2YgQXV0aC52ZXJpZnlDdXJyZW50VXNlckF0dHJpYnV0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEF1dGgudmVyaWZ5Q3VycmVudFVzZXJBdHRyaWJ1dGUoY29udGFjdCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDIuZGVidWcoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZlcmlmeUF0dHIgPSBjb250YWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEwID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hUb2FzdEh1YkV2ZW50KGVycm9yXzEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlciQyLmVycm9yKGVycm9yXzEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzcucHJvdG90eXBlLmhhbmRsZUlucHV0Q2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBpbnB1dE5hbWUgPSBldmVudC50YXJnZXQubmFtZTtcbiAgICAgICAgaWYgKGlucHV0TmFtZSA9PT0gJ2NvZGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNvZGUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5wdXROYW1lID09PSAnY29udGFjdCcpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFjdCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfNy5wcm90b3R5cGUucmVuZGVyU3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgaChcImFtcGxpZnktaW5wdXRcIiwgeyBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiAnb2ZmJyxcbiAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3ZlcmlmeS1jb250YWN0LWNvZGUtaW5wdXQnLFxuICAgICAgICAgICAgfSwgbmFtZTogXCJjb2RlXCIsIHBsYWNlaG9sZGVyOiBJMThuLmdldChUcmFuc2xhdGlvbnMuQ09ERV9QTEFDRUhPTERFUiksIGhhbmRsZUlucHV0Q2hhbmdlOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlKGV2ZW50KTsgfSB9KSkpO1xuICAgIH07XG4gICAgY2xhc3NfNy5wcm90b3R5cGUucmVuZGVyVmVyaWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdXNlciA9IHRoaXMudXNlcjtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICBsb2dnZXIkMi5kZWJ1ZygnTm8gdXNlciB0byB2ZXJpZnknKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1bnZlcmlmaWVkID0gdXNlci51bnZlcmlmaWVkO1xuICAgICAgICBpZiAoIXVudmVyaWZpZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlciQyLmRlYnVnKCdVbnZlcmlmaWVkIHZhcmlhYmxlIGRvZXMgbm90IGV4aXN0IG9uIHVzZXInKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbWFpbCA9IHVudmVyaWZpZWQuZW1haWwsIHBob25lX251bWJlciA9IHVudmVyaWZpZWQucGhvbmVfbnVtYmVyO1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgZW1haWwgJiYgKGgoXCJhbXBsaWZ5LXJhZGlvLWJ1dHRvblwiLCB7IGxhYmVsOiBJMThuLmdldChUcmFuc2xhdGlvbnMuVkVSSUZZX0NPTlRBQ1RfRU1BSUxfTEFCRUwpLCBrZXk6IFwiZW1haWxcIiwgbmFtZTogXCJjb250YWN0XCIsIHZhbHVlOiBcImVtYWlsXCIsIGhhbmRsZUlucHV0Q2hhbmdlOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlKGV2ZW50KTsgfSwgaW5wdXRQcm9wczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXRlc3QnOiAndmVyaWZ5LWNvbnRhY3QtZW1haWwtcmFkaW8nLFxuICAgICAgICAgICAgfSB9KSksIHBob25lX251bWJlciAmJiAoaChcImFtcGxpZnktcmFkaW8tYnV0dG9uXCIsIHsgbGFiZWw6IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5WRVJJRllfQ09OVEFDVF9QSE9ORV9MQUJFTCksIGtleTogXCJwaG9uZV9udW1iZXJcIiwgbmFtZTogXCJjb250YWN0XCIsIHZhbHVlOiBcInBob25lX251bWJlclwiLCBoYW5kbGVJbnB1dENoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dENoYW5nZShldmVudCk7IH0sIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS10ZXN0JzogJ3ZlcmlmeS1jb250YWN0LWVtYWlsLXJhZGlvJyxcbiAgICAgICAgICAgIH0gfSkpKSk7XG4gICAgfTtcbiAgICBjbGFzc183LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYW1wbGlmeS1mb3JtLXNlY3Rpb25cIiwgeyBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlU3VibWl0KGV2ZW50KTsgfSwgaGVhZGVyVGV4dDogSTE4bi5nZXQoVHJhbnNsYXRpb25zLlZFUklGWV9DT05UQUNUX0hFQURFUl9URVhUKSwgbG9hZGluZzogdGhpcy5sb2FkaW5nLCBzZWNvbmRhcnlGb290ZXJDb250ZW50OiBoKFwic3BhblwiLCBudWxsLCBoKFwiYW1wbGlmeS1idXR0b25cIiwgeyB2YXJpYW50OiBcImFuY2hvclwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25lZEluLCBfdGhpcy51c2VyKTsgfSB9LCBcIlNraXBcIikpLCBzdWJtaXRCdXR0b25UZXh0OiB0aGlzLnZlcmlmeUF0dHJcbiAgICAgICAgICAgICAgICA/IEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5WRVJJRllfQ09OVEFDVF9TVUJNSVRfTEFCRUwpXG4gICAgICAgICAgICAgICAgOiBJMThuLmdldChUcmFuc2xhdGlvbnMuVkVSSUZZX0NPTlRBQ1RfVkVSSUZZX0xBQkVMKSB9LCB0aGlzLnZlcmlmeUF0dHIgPyB0aGlzLnJlbmRlclN1Ym1pdCgpIDogdGhpcy5yZW5kZXJWZXJpZnkoKSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBjbGFzc183O1xufSgpKTtcbmV4cG9ydCB7IEFtcGxpZnlDb25maXJtU2lnbkluIGFzIGFtcGxpZnlfY29uZmlybV9zaWduX2luLCBBbXBsaWZ5Q29uZmlybVNpZ25VcCBhcyBhbXBsaWZ5X2NvbmZpcm1fc2lnbl91cCwgQW1wbGlmeUZvcmdvdFBhc3N3b3JkIGFzIGFtcGxpZnlfZm9yZ290X3Bhc3N3b3JkLCBBbXBsaWZ5UmVxdWlyZU5ld1Bhc3N3b3JkIGFzIGFtcGxpZnlfcmVxdWlyZV9uZXdfcGFzc3dvcmQsIEFtcGxpZnlTaWduSW4gYXMgYW1wbGlmeV9zaWduX2luLCBBbXBsaWZ5U2lnblVwIGFzIGFtcGxpZnlfc2lnbl91cCwgQW1wbGlmeVZlcmlmeUNvbnRhY3QgYXMgYW1wbGlmeV92ZXJpZnlfY29udGFjdCB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-confirm-sign-in_7.entry.js\n");

/***/ }),

/***/ "../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-helpers-63cc23c0.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-helpers-63cc23c0.js ***!
  \****************************************************************************************/
/*! exports provided: c, h */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return checkContact; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return handleSignIn; });\n/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ \"../node_modules/@aws-amplify/core/lib-esm/index.js\");\n/* harmony import */ var _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth-types-78df304e.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-types-78df304e.js\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/auth */ \"../node_modules/@aws-amplify/auth/lib-esm/index.js\");\n/* harmony import */ var _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Translations-c833f663.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/Translations-c833f663.js\");\n/* harmony import */ var _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants-d1abe7de.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/constants-d1abe7de.js\");\n/* harmony import */ var _helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers-09e7c279.js */ \"../node_modules/@aws-amplify/ui-components/dist/esm-es5/helpers-09e7c279.js\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\nvar logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"]('auth-helpers');\nfunction checkContact(user, handleAuthStateChange) {\n    return __awaiter(this, void 0, void 0, function () {\n        var data, newUser, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"].verifiedContact !== 'function') {\n                        throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__[\"N\"]);\n                    }\n                    // If `user` is a federated user, we shouldn't call `verifiedContact`\n                    // since `user` isn't `CognitoUser`\n                    if (!isCognitoUser(user)) {\n                        handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].SignedIn, user);\n                        return [2 /*return*/];\n                    }\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"].verifiedContact(user)];\n                case 2:\n                    data = _a.sent();\n                    if (!Object(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__[\"isEmpty\"])(data.verified) || Object(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__[\"isEmpty\"])(data.unverified)) {\n                        handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].SignedIn, user);\n                    }\n                    else {\n                        newUser = Object.assign(user, data);\n                        handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].VerifyContact, newUser);\n                    }\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_5__[\"a\"])(error_1);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nvar handleSignIn = function (username, password, handleAuthStateChange) { return __awaiter(void 0, void 0, void 0, function () {\n    var user, error_2;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"] || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"].signIn !== 'function') {\n                    throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__[\"N\"]);\n                }\n                _a.label = 1;\n            case 1:\n                _a.trys.push([1, 9, , 10]);\n                return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"Auth\"].signIn(username, password)];\n            case 2:\n                user = _a.sent();\n                logger.debug(user);\n                if (!(user.challengeName === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"C\"].SMSMFA || user.challengeName === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"C\"].SoftwareTokenMFA)) return [3 /*break*/, 3];\n                logger.debug('confirm user with ' + user.challengeName);\n                handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].ConfirmSignIn, user);\n                return [3 /*break*/, 8];\n            case 3:\n                if (!(user.challengeName === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"C\"].NewPasswordRequired)) return [3 /*break*/, 4];\n                logger.debug('require new password', user.challengeParam);\n                handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].ResetPassword, user);\n                return [3 /*break*/, 8];\n            case 4:\n                if (!(user.challengeName === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"C\"].MFASetup)) return [3 /*break*/, 5];\n                logger.debug('TOTP setup', user.challengeParam);\n                handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].TOTPSetup, user);\n                return [3 /*break*/, 8];\n            case 5:\n                if (!(user.challengeName === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"C\"].CustomChallenge &&\n                    user.challengeParam &&\n                    user.challengeParam.trigger === 'true')) return [3 /*break*/, 6];\n                logger.debug('custom challenge', user.challengeParam);\n                handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].CustomConfirmSignIn, user);\n                return [3 /*break*/, 8];\n            case 6: return [4 /*yield*/, checkContact(user, handleAuthStateChange)];\n            case 7:\n                _a.sent();\n                _a.label = 8;\n            case 8: return [3 /*break*/, 10];\n            case 9:\n                error_2 = _a.sent();\n                if (error_2.code === 'UserNotConfirmedException') {\n                    logger.debug('the user is not confirmed');\n                    handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].ConfirmSignUp, { username: username });\n                }\n                else if (error_2.code === 'PasswordResetRequiredException') {\n                    logger.debug('the user requires a new password');\n                    handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__[\"A\"].ForgotPassword, { username: username });\n                }\n                else if (error_2.code === 'InvalidParameterException' && password === '') {\n                    logger.debug('Password cannot be empty');\n                    error_2.message = _Translations_c833f663_js__WEBPACK_IMPORTED_MODULE_3__[\"T\"].EMPTY_PASSWORD;\n                }\n                Object(_helpers_09e7c279_js__WEBPACK_IMPORTED_MODULE_5__[\"a\"])(error_2);\n                return [3 /*break*/, 10];\n            case 10: return [2 /*return*/];\n        }\n    });\n}); };\nvar isCognitoUser = function (user) {\n    return user instanceof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__[\"CognitoUser\"];\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9AYXdzLWFtcGxpZnkvdWktY29tcG9uZW50cy9kaXN0L2VzbS1lczUvYXV0aC1oZWxwZXJzLTYzY2MyM2MwLmpzPzEwYjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCLDJCQUEyQiwrREFBK0QsZ0JBQWdCLEVBQUUsRUFBRTtBQUM5RztBQUNBLG1DQUFtQyxNQUFNLDZCQUE2QixFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ2pHLGtDQUFrQyxNQUFNLGlDQUFpQyxFQUFFLFlBQVksV0FBVyxFQUFFO0FBQ3BHLCtCQUErQixxRkFBcUY7QUFDcEg7QUFDQSxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsU0FBSSxJQUFJLFNBQUk7QUFDL0IsYUFBYSw2QkFBNkIsMEJBQTBCLGFBQWEsRUFBRSxxQkFBcUI7QUFDeEcsZ0JBQWdCLHFEQUFxRCxvRUFBb0UsYUFBYSxFQUFFO0FBQ3hKLHNCQUFzQixzQkFBc0IscUJBQXFCLEdBQUc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLGtDQUFrQyxTQUFTO0FBQzNDLGtDQUFrQyxXQUFXLFVBQVU7QUFDdkQseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQSw2R0FBNkcsT0FBTyxVQUFVO0FBQzlILGdGQUFnRixpQkFBaUIsT0FBTztBQUN4Ryx3REFBd0QsZ0JBQWdCLFFBQVEsT0FBTztBQUN2Riw4Q0FBOEMsZ0JBQWdCLGdCQUFnQixPQUFPO0FBQ3JGO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTLFlBQVksYUFBYSxPQUFPLEVBQUUsVUFBVSxXQUFXO0FBQ2hFLG1DQUFtQyxTQUFTO0FBQzVDO0FBQ0E7QUFDb0Q7QUFDMEI7QUFDeEI7QUFDUztBQUNLO0FBQ0Q7QUFDbkUsaUJBQWlCLHdEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBSSxXQUFXLHNEQUFJO0FBQzVDLHdDQUF3Qyx3REFBb0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMseURBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBSTtBQUM3QztBQUNBO0FBQ0EseUJBQXlCLGlFQUFPLG1CQUFtQixpRUFBTztBQUMxRCw4Q0FBOEMseURBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHlEQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EseUVBQXlFO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFJLFdBQVcsc0RBQUk7QUFDeEMsb0NBQW9DLHdEQUFvQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBSTtBQUN6QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMseURBQWEsa0NBQWtDLHlEQUFhO0FBQ3pHO0FBQ0Esc0NBQXNDLHlEQUFTO0FBQy9DO0FBQ0E7QUFDQSw2Q0FBNkMseURBQWE7QUFDMUQ7QUFDQSxzQ0FBc0MseURBQVM7QUFDL0M7QUFDQTtBQUNBLDZDQUE2Qyx5REFBYTtBQUMxRDtBQUNBLHNDQUFzQyx5REFBUztBQUMvQztBQUNBO0FBQ0EsNkNBQTZDLHlEQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx5REFBUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx5REFBUyxpQkFBaUIscUJBQXFCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx5REFBUyxrQkFBa0IscUJBQXFCO0FBQzFGO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBWTtBQUNsRDtBQUNBLGdCQUFnQiw4REFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUMsRUFBRTtBQUNIO0FBQ0EsMkJBQTJCLDZEQUFXO0FBQ3RDO0FBQ2dEIiwiZmlsZSI6Ii4uL25vZGVfbW9kdWxlcy9AYXdzLWFtcGxpZnkvdWktY29tcG9uZW50cy9kaXN0L2VzbS1lczUvYXV0aC1oZWxwZXJzLTYzY2MyM2MwLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IExvZ2dlciwgaXNFbXB0eSB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9jb3JlJztcbmltcG9ydCB7IEEgYXMgQXV0aFN0YXRlLCBDIGFzIENoYWxsZW5nZU5hbWUgfSBmcm9tICcuL2F1dGgtdHlwZXMtNzhkZjMwNGUuanMnO1xuaW1wb3J0IHsgQXV0aCwgQ29nbml0b1VzZXIgfSBmcm9tICdAYXdzLWFtcGxpZnkvYXV0aCc7XG5pbXBvcnQgeyBUIGFzIFRyYW5zbGF0aW9ucyB9IGZyb20gJy4vVHJhbnNsYXRpb25zLWM4MzNmNjYzLmpzJztcbmltcG9ydCB7IE4gYXMgTk9fQVVUSF9NT0RVTEVfRk9VTkQgfSBmcm9tICcuL2NvbnN0YW50cy1kMWFiZTdkZS5qcyc7XG5pbXBvcnQgeyBhIGFzIGRpc3BhdGNoVG9hc3RIdWJFdmVudCB9IGZyb20gJy4vaGVscGVycy0wOWU3YzI3OS5qcyc7XG52YXIgbG9nZ2VyID0gbmV3IExvZ2dlcignYXV0aC1oZWxwZXJzJyk7XG5mdW5jdGlvbiBjaGVja0NvbnRhY3QodXNlciwgaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0YSwgbmV3VXNlciwgZXJyb3JfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBdXRoIHx8IHR5cGVvZiBBdXRoLnZlcmlmaWVkQ29udGFjdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PX0FVVEhfTU9EVUxFX0ZPVU5EKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBgdXNlcmAgaXMgYSBmZWRlcmF0ZWQgdXNlciwgd2Ugc2hvdWxkbid0IGNhbGwgYHZlcmlmaWVkQ29udGFjdGBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgYHVzZXJgIGlzbid0IGBDb2duaXRvVXNlcmBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvZ25pdG9Vc2VyKHVzZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25lZEluLCB1c2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLnZlcmlmaWVkQ29udGFjdCh1c2VyKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRW1wdHkoZGF0YS52ZXJpZmllZCkgfHwgaXNFbXB0eShkYXRhLnVudmVyaWZpZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25lZEluLCB1c2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1VzZXIgPSBPYmplY3QuYXNzaWduKHVzZXIsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5WZXJpZnlDb250YWN0LCBuZXdVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RIdWJFdmVudChlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxudmFyIGhhbmRsZVNpZ25JbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQsIGhhbmRsZUF1dGhTdGF0ZUNoYW5nZSkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXNlciwgZXJyb3JfMjtcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBpZiAoIUF1dGggfHwgdHlwZW9mIEF1dGguc2lnbkluICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDksICwgMTBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLnNpZ25Jbih1c2VybmFtZSwgcGFzc3dvcmQpXTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICB1c2VyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyh1c2VyKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1c2VyLmNoYWxsZW5nZU5hbWUgPT09IENoYWxsZW5nZU5hbWUuU01TTUZBIHx8IHVzZXIuY2hhbGxlbmdlTmFtZSA9PT0gQ2hhbGxlbmdlTmFtZS5Tb2Z0d2FyZVRva2VuTUZBKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdjb25maXJtIHVzZXIgd2l0aCAnICsgdXNlci5jaGFsbGVuZ2VOYW1lKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLkNvbmZpcm1TaWduSW4sIHVzZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGlmICghKHVzZXIuY2hhbGxlbmdlTmFtZSA9PT0gQ2hhbGxlbmdlTmFtZS5OZXdQYXNzd29yZFJlcXVpcmVkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdyZXF1aXJlIG5ldyBwYXNzd29yZCcsIHVzZXIuY2hhbGxlbmdlUGFyYW0pO1xuICAgICAgICAgICAgICAgIGhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuUmVzZXRQYXNzd29yZCwgdXNlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgaWYgKCEodXNlci5jaGFsbGVuZ2VOYW1lID09PSBDaGFsbGVuZ2VOYW1lLk1GQVNldHVwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdUT1RQIHNldHVwJywgdXNlci5jaGFsbGVuZ2VQYXJhbSk7XG4gICAgICAgICAgICAgICAgaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5UT1RQU2V0dXAsIHVzZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIGlmICghKHVzZXIuY2hhbGxlbmdlTmFtZSA9PT0gQ2hhbGxlbmdlTmFtZS5DdXN0b21DaGFsbGVuZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgdXNlci5jaGFsbGVuZ2VQYXJhbSAmJlxuICAgICAgICAgICAgICAgICAgICB1c2VyLmNoYWxsZW5nZVBhcmFtLnRyaWdnZXIgPT09ICd0cnVlJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnY3VzdG9tIGNoYWxsZW5nZScsIHVzZXIuY2hhbGxlbmdlUGFyYW0pO1xuICAgICAgICAgICAgICAgIGhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuQ3VzdG9tQ29uZmlybVNpZ25JbiwgdXNlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbNCAvKnlpZWxkKi8sIGNoZWNrQ29udGFjdCh1c2VyLCBoYW5kbGVBdXRoU3RhdGVDaGFuZ2UpXTtcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgX2EubGFiZWwgPSA4O1xuICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzMgLypicmVhayovLCAxMF07XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgZXJyb3JfMiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JfMi5jb2RlID09PSAnVXNlck5vdENvbmZpcm1lZEV4Y2VwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCd0aGUgdXNlciBpcyBub3QgY29uZmlybWVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUF1dGhTdGF0ZUNoYW5nZShBdXRoU3RhdGUuQ29uZmlybVNpZ25VcCwgeyB1c2VybmFtZTogdXNlcm5hbWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVycm9yXzIuY29kZSA9PT0gJ1Bhc3N3b3JkUmVzZXRSZXF1aXJlZEV4Y2VwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCd0aGUgdXNlciByZXF1aXJlcyBhIG5ldyBwYXNzd29yZCcpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLkZvcmdvdFBhc3N3b3JkLCB7IHVzZXJuYW1lOiB1c2VybmFtZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3JfMi5jb2RlID09PSAnSW52YWxpZFBhcmFtZXRlckV4Y2VwdGlvbicgJiYgcGFzc3dvcmQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFzc3dvcmQgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzIubWVzc2FnZSA9IFRyYW5zbGF0aW9ucy5FTVBUWV9QQVNTV09SRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hUb2FzdEh1YkV2ZW50KGVycm9yXzIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgIGNhc2UgMTA6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7IH07XG52YXIgaXNDb2duaXRvVXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIHVzZXIgaW5zdGFuY2VvZiBDb2duaXRvVXNlcjtcbn07XG5leHBvcnQgeyBjaGVja0NvbnRhY3QgYXMgYywgaGFuZGxlU2lnbkluIGFzIGggfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-helpers-63cc23c0.js\n");

/***/ })

}]);